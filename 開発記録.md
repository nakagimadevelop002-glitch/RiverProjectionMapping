# RiverProjectionMap_ver26110 é–‹ç™ºè¨˜éŒ²

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: RiverProjectionMap_ver26110
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹**: `D:\seimiya\Unity\RiverProjectionMap_ver26110`
**ç›®çš„**: Pythonãƒ™ãƒ¼ã‚¹ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æµã‚Œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Unityã§å†ç¾ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°ç”¨ï¼‰
**é–‹å§‹æ—¥**: 2026-01-02
**ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: URP (Universal Render Pipeline) - Unity 6ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ

---

## ğŸ“… 2026-01-27ï¼ˆç¶šã3ï¼‰

### Phase 29: ãƒ“ãƒ«ãƒ‰å¾ŒUIãƒ­ã‚°è¡¨ç¤ºå•é¡Œã®ä¿®æ­£ï¼ˆå®Œäº† âœ…ï¼‰

#### å•é¡Œ
ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã§ã¯æ­£å¸¸å‹•ä½œã™ã‚‹ãŒã€ãƒ“ãƒ«ãƒ‰å¾Œã¯UIãƒ­ã‚°ã«ã€Œè¨ˆæ¸¬é–‹å§‹...ã€ã®ã¿è¡¨ç¤ºã•ã‚Œã€ã€ŒæˆåŠŸã€ã€Œå¤±æ•—ã€ãŒè¡¨ç¤ºã•ã‚Œãªã„

#### èª¿æŸ»å†…å®¹
Player.logã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç¹°ã‚Šè¿”ã—å‡ºåŠ›ï¼š
```
[CameraSpeedReceiver] Pythonã‚¨ãƒ©ãƒ¼: python: can't open file 'C:\\Users\\Simna\\Desktop\\ProjectionRiverBuild\\Assets\\StreamingAssets\\PythonScripts\\baseline_stiv.py': [Errno 2] No such file or directory
```

#### æ ¹æœ¬åŸå› 
**ç›¸å¯¾ãƒ‘ã‚¹`Assets/StreamingAssets/...`ã®æŒ™å‹•å·®**ï¼š
- **ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼å®Ÿè¡Œæ™‚**: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª = Unityãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ â†’ `Assets/StreamingAssets/...`ãŒæœ‰åŠ¹
- **ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚**: ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª = ãƒ“ãƒ«ãƒ‰ãƒ•ã‚©ãƒ«ãƒ€ â†’ `Assets/StreamingAssets/...`ãŒç„¡åŠ¹

ãƒ“ãƒ«ãƒ‰å¾Œã®æ­£ã—ã„ãƒ‘ã‚¹: `RiverProjectionMap_New_Data/StreamingAssets/...`

Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã§ããªã„ â†’ é€Ÿåº¦çµæœãŒè¿”ã‚‰ãªã„ â†’ `LogSuccess()`/`LogFailure()`ãŒå‘¼ã°ã‚Œãªã„ â†’ UIãƒ­ã‚°ãŒã€Œè¨ˆæ¸¬é–‹å§‹...ã€ã§æ­¢ã¾ã‚‹

#### ä¿®æ­£å†…å®¹ï¼ˆCameraSpeedReceiver.csï¼‰

**1. ãƒ“ãƒ«ãƒ‰å¾Œãƒ‘ã‚¹å¯¾å¿œ**ï¼ˆ318-337è¡Œï¼‰:
```csharp
// ãƒ“ãƒ«ãƒ‰å¾Œå¯¾å¿œï¼šscriptPathã‚’Application.streamingAssetsPathãƒ™ãƒ¼ã‚¹ã§æ§‹ç¯‰
string fullScriptPath;
if (scriptPath.StartsWith("Assets/StreamingAssets/"))
{
    // "Assets/StreamingAssets/PythonScripts/baseline_stiv.py" â†’ "PythonScripts/baseline_stiv.py"
    string relativePath = scriptPath.Substring("Assets/StreamingAssets/".Length);
    fullScriptPath = System.IO.Path.Combine(Application.streamingAssetsPath, relativePath);
}
else
{
    // çµ¶å¯¾ãƒ‘ã‚¹ã¾ãŸã¯ä»–ã®å½¢å¼ã®å ´åˆã¯ãã®ã¾ã¾ä½¿ç”¨
    fullScriptPath = scriptPath;
}
```

**ä¿®æ­£å‰ã®ãƒ‘ã‚¹**ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ï¼‰:
```
C:\Users\Simna\Desktop\ProjectionRiverBuild\Assets\StreamingAssets\PythonScripts\baseline_stiv.py
```
â†’ ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã›ãšã‚¨ãƒ©ãƒ¼

**ä¿®æ­£å¾Œã®ãƒ‘ã‚¹**ï¼ˆãƒ“ãƒ«ãƒ‰æ™‚ï¼‰:
```
C:/Users/Simna/Desktop/ProjectionRiverBuild/RiverProjectionMap_New_Data/StreamingAssets\PythonScripts/baseline_stiv.py
```
â†’ æ­£ã—ã„ãƒ‘ã‚¹ã§Pythonå®Ÿè¡ŒæˆåŠŸ

**2. ã‚¨ãƒ©ãƒ¼è¨˜éŒ²æ¡ä»¶æ‹¡å¼µ**ï¼ˆ437è¡Œï¼‰:
```csharp
// ãƒ­ã‚°ã«ã‚¨ãƒ©ãƒ¼ã‚’è¨˜éŒ²ï¼ˆãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ã‚‚å«ã‚€ï¼‰
if (logger != null && (e.Data.StartsWith("[ERROR]") || e.Data.StartsWith("OSError") || e.Data.StartsWith("IOError") || e.Data.StartsWith("Exception") || e.Data.Contains("Camera") || e.Data.StartsWith("python:")))
{
    logger.LogError(e.Data);
}
```

`e.Data.StartsWith("python:")`ã‚’è¿½åŠ ã—ã€Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚‚UIã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã€‚

#### åŠ¹æœ
- âœ… ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ãƒ»ãƒ“ãƒ«ãƒ‰ä¸¡æ–¹ã§æ­£ã—ã„ãƒ‘ã‚¹ã‚’è‡ªå‹•ç”Ÿæˆ
- âœ… ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œæ™‚ã‚‚Pythonæ­£å¸¸å®Ÿè¡Œ â†’ UIãƒ­ã‚°ã«ã€ŒæˆåŠŸã€ã€Œå¤±æ•—ã€è¡¨ç¤º
- âœ… Pythonãƒ‘ã‚¹ã‚¨ãƒ©ãƒ¼ã‚‚UIãƒ­ã‚°ã«è¨˜éŒ²
- âœ… ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½“ã§å‹•ä½œï¼ˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼å´ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ï¼‰

#### ä¿®æ­£å¾Œã®ãƒ­ã‚°è¡¨ç¤º
```
[17:14:15] è¨ˆæ¸¬é–‹å§‹...
[17:14:23] æˆåŠŸ: 0.283390 m/s
[17:14:31] è¨ˆæ¸¬é–‹å§‹...
[17:14:38] å¤±æ•—: 0.006291 m/s (é–¾å€¤: 0.010 m/s)
```
## ğŸ“… 2026-01-27ï¼ˆç¶šã2ï¼‰

### Phase 28: ã‚«ãƒ¡ãƒ©ã‚¨ãƒ©ãƒ¼æ™‚ã®ä¾‹å¤–å‡¦ç†å¼·åŒ–ï¼ˆå®Œäº† âœ…ï¼‰

#### å•é¡Œ
ã‚«ãƒ¡ãƒ©åãŒç„¡åŠ¹ãªå ´åˆã€Pythonã‹ã‚‰`[ERROR] Failed to find camera by name:`ãŒå‡ºåŠ›ã•ã‚Œã‚‹ãŒã€UI Textï¼ˆloggerï¼‰ã«è¨˜éŒ²ã•ã‚Œãªã„

#### åŸå› 
OnErrorDataReceivedã®æ¡ä»¶ãŒä¸ååˆ†ï¼ˆCameraSpeedReceiver.cs:420ï¼‰:
```csharp
// æ—§: OSErrorã€IOErrorã€Exceptionã§å§‹ã¾ã‚‹è¡Œã®ã¿è¨˜éŒ²
if (logger != null && (e.Data.StartsWith("OSError") || e.Data.StartsWith("IOError") || e.Data.StartsWith("Exception")))
```

ã‚«ãƒ¡ãƒ©ã‚¨ãƒ©ãƒ¼ã¯`[ERROR]`ã§å§‹ã¾ã‚‹ãŸã‚ã€æ¡ä»¶ã«è©²å½“ã›ãšè¨˜éŒ²ã•ã‚Œãªã„ã€‚

#### ä¿®æ­£å†…å®¹ï¼ˆCameraSpeedReceiver.cs:420ï¼‰

```csharp
// ãƒ­ã‚°ã«ã‚¨ãƒ©ãƒ¼ã‚’è¨˜éŒ²
if (logger != null && (e.Data.StartsWith("[ERROR]") || e.Data.StartsWith("OSError") || e.Data.StartsWith("IOError") || e.Data.StartsWith("Exception") || e.Data.Contains("Camera")))
{
    logger.LogError(e.Data);
}
```

**è¿½åŠ ã—ãŸæ¡ä»¶**:
- `e.Data.StartsWith("[ERROR]")` - Pythonã®æ¨™æº–ã‚¨ãƒ©ãƒ¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- `e.Data.Contains("Camera")` - ã‚«ãƒ¡ãƒ©é–¢é€£ã‚¨ãƒ©ãƒ¼å…¨èˆ¬

#### æ—¢å­˜ã®ä¾‹å¤–å‡¦ç†ï¼ˆç¢ºèªæ¸ˆã¿ï¼‰

**1. C#å´ã®try-catch**ï¼ˆ346-350è¡Œï¼‰:
- Pythonãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•å¤±æ•—ã‚’ã‚­ãƒ£ãƒƒãƒ
- `isProcessing = false` ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- ã‚¢ãƒ—ãƒªã¯åœæ­¢ã—ãªã„

**2. ã‚«ãƒ¡ãƒ©åç©ºãƒã‚§ãƒƒã‚¯**ï¼ˆ305-310è¡Œï¼‰:
- ã‚«ãƒ¡ãƒ©åãŒç©ºã®å ´åˆã€è­¦å‘Šãƒ­ã‚°å‡ºåŠ›
- `isProcessing = false` ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- ã‚¢ãƒ—ãƒªã¯åœæ­¢ã—ãªã„

**3. OnProcessExited**ï¼ˆ430-445è¡Œï¼‰:
- Pythonãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†æ™‚ã«å¿…ãš`isProcessing = false`
- ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©è§£é™¤
- ã‚¢ãƒ—ãƒªã¯åœæ­¢ã—ãªã„

#### åŠ¹æœ
- âœ… ã‚«ãƒ¡ãƒ©åãŒç„¡åŠ¹ã§ã‚‚ã‚¢ãƒ—ãƒªã¯åœæ­¢ã—ãªã„
- âœ… Pythonã‚¨ãƒ©ãƒ¼ã¯å…¨ã¦Unityã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
- âœ… ã‚«ãƒ¡ãƒ©é–¢é€£ã‚¨ãƒ©ãƒ¼ã¯UI Textï¼ˆloggerï¼‰ã«ã‚‚è¡¨ç¤º
- âœ… `[ERROR]`å½¢å¼ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚è¨˜éŒ²
- âœ… ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†æ™‚ã«å¿…ãšã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- âœ… æ¬¡å›ã®è¨ˆæ¸¬å®Ÿè¡Œã«å½±éŸ¿ã—ãªã„

---

## ğŸ“… 2026-01-27ï¼ˆç¶šãï¼‰

### Phase 27: ã‚«ãƒ¡ãƒ©åUIå…¥åŠ›å¯¾å¿œï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ UIã§ã‚«ãƒ¡ãƒ©åã‚’å…¥åŠ›ã—ã€å¤–éƒ¨ã‚«ãƒ¡ãƒ©ã‚’ä½¿ç”¨å¯èƒ½ã«ã™ã‚‹

#### èƒŒæ™¯
- ç¾åœ¨ï¼šå¤–éƒ¨ã‚«ãƒ¡ãƒ©ã¯ãƒ“ãƒ«ãƒ‰å‰ã«Inspectorè¨­å®šãŒå¿…è¦
- è¦æ±‚ï¼šUI InputFieldã§ã‚«ãƒ¡ãƒ©åã‚’å…¥åŠ›ã™ã‚Œã°ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹

#### å®Ÿè£…å†…å®¹

**1. UIåˆ¶å¾¡é–¢æ•°è¿½åŠ **ï¼ˆCameraSpeedReceiver.cs:199-208ï¼‰:
```csharp
/// <summary>
/// ã‚«ãƒ¡ãƒ©åã‚’è¨­å®šï¼ˆUI InputFieldç”¨ï¼‰
/// </summary>
public void SetCameraName(string name)
{
    cameraName = name;

    if (showDebugLog)
        UnityEngine.Debug.Log($"[CameraSpeedReceiver] ã‚«ãƒ¡ãƒ©åã‚’'{cameraName}'ã«è¨­å®š");
}
```

**2. InputFieldãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ **ï¼ˆCameraSpeedReceiver.cs:70-71ï¼‰:
```csharp
[Tooltip("ã‚«ãƒ¡ãƒ©åå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆåˆæœŸå€¤ã‚’Inspectorè¨­å®šå€¤ã«åŒæœŸï¼‰")]
public UnityEngine.UI.InputField cameraNameInputField;
```

**3. Start()ã§ã®åˆæœŸå€¤åŒæœŸ**ï¼ˆCameraSpeedReceiver.cs:104-108ï¼‰:
```csharp
// ã‚«ãƒ¡ãƒ©åInputFieldã®åˆæœŸå€¤ã‚’Inspectorè¨­å®šå€¤ã«åŒæœŸ
if (cameraNameInputField != null)
{
    cameraNameInputField.text = cameraName;
}
```

**4. UIè¨­å®šæ–¹æ³•**:
- InputField â†’ OnValueChanged(String) â†’ Dynamic string â†’ SetCameraName
- Inspectorã§Camera Name Input Fieldãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨­å®š
- èµ·å‹•æ™‚ã€Inspectorè¨­å®šå€¤ãŒInputFieldã®åˆæœŸå€¤ã«ãªã‚‹

#### å‹•ä½œ
- **cameraId = 0, 1**: ã‚«ãƒ¡ãƒ©IDã§ç›´æ¥æŒ‡å®šï¼ˆå¾“æ¥é€šã‚Šï¼‰
- **cameraId = 2ä»¥é™**: cameraNameã§æŒ‡å®š
  - baseline_stiv.pyã®`find_camera_id_by_name()`ã§ã‚«ãƒ¡ãƒ©åâ†’IDå¤‰æ›
  - WMIã§Windowsã‚«ãƒ¡ãƒ©ãƒªã‚¹ãƒˆã‚’æ¤œç´¢
  - ä¸€è‡´ã™ã‚‹ã‚«ãƒ¡ãƒ©ã®OpenCV IDã‚’ç‰¹å®š

#### ä½¿ç”¨ä¾‹

**ãƒ“ãƒ«ãƒ‰å‰ã®æº–å‚™**:
1. Inspectorã§cameraNameã«`HD Webcam eMeet C960`ã‚’è¨­å®š
2. Inspectorã§Camera Name Input Fieldã«InputFieldã‚’è¨­å®š

**ãƒ“ãƒ«ãƒ‰å¾Œã®å‹•ä½œ**:
1. èµ·å‹•æ™‚ã€InputFieldã«`HD Webcam eMeet C960`ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆInspectorè¨­å®šå€¤ï¼‰
2. UI Sliderã§`cameraId = 2`ã«è¨­å®š
3. è¨ˆæ¸¬é–‹å§‹ â†’ eMeet C960ãŒä½¿ç”¨ã•ã‚Œã‚‹
4. InputFieldã‚’ç·¨é›†ã™ã‚Œã°ã€åˆ¥ã®ã‚«ãƒ¡ãƒ©ã«å¤‰æ›´å¯èƒ½

#### åŠ¹æœ
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§å¤–éƒ¨ã‚«ãƒ¡ãƒ©åã‚’å…¥åŠ›å¯èƒ½
- âœ… è¤‡æ•°ã®å¤–éƒ¨ã‚«ãƒ¡ãƒ©ã‚’åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- âœ… Inspectorè¨­å®šå€¤ãŒInputFieldã®åˆæœŸå€¤ã«ãªã‚‹
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§ã‚«ãƒ¡ãƒ©åè¨­å®šã‚’ç¢ºèªå¯èƒ½
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã‚‚ã‚«ãƒ¡ãƒ©åã‚’è‡ªç”±ã«å¤‰æ›´å¯èƒ½

---

## ğŸ“… 2026-01-27

### Phase 26: è¨ˆæ¸¬æ©Ÿèƒ½ON/OFFåˆ¶å¾¡ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ UIã§è¨ˆæ¸¬æ©Ÿèƒ½å…¨ä½“ã‚’ON/OFFã§ãã‚‹ãƒˆã‚°ãƒ«ã‚’å®Ÿè£…

#### å®Ÿè£…å†…å®¹

**1. UIåˆ¶å¾¡é–¢æ•°è¿½åŠ **ï¼ˆCameraSpeedReceiver.cs:210-239ï¼‰:
```csharp
/// <summary>
/// è¨ˆæ¸¬æ©Ÿèƒ½ã®ç„¡åŠ¹åŒ–ã‚’è¨­å®šï¼ˆUI Toggleç”¨ï¼‰
/// </summary>
/// <param name="disabled">true: è¨ˆæ¸¬ã‚’åœæ­¢ã€false: è¨ˆæ¸¬ã‚’æœ‰åŠ¹åŒ–</param>
public void SetMeasurementDisabled(bool disabled)
{
    measurementEnabled = !disabled;

    if (showDebugLog)
    {
        string status = measurementEnabled ? "æœ‰åŠ¹" : "ç„¡åŠ¹";
        UnityEngine.Debug.Log($"[CameraSpeedReceiver] è¨ˆæ¸¬æ©Ÿèƒ½ã‚’{status}ã«è¨­å®š");
    }

    if (disabled)
    {
        // ç„¡åŠ¹åŒ–æ™‚: å®šæœŸå®Ÿè¡Œåœæ­¢ + å®Ÿè¡Œä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹åœæ­¢
        CancelInvoke(nameof(StartMeasurement));
        if (isProcessing)
        {
            StopPythonProcess();
        }
    }
    else
    {
        // æœ‰åŠ¹åŒ–æ™‚: å®šæœŸå®Ÿè¡Œå†é–‹
        CancelInvoke(nameof(StartMeasurement));  // å¿µã®ãŸã‚æ—¢å­˜ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        InvokeRepeating(nameof(StartMeasurement), 0f, measurementInterval);
    }
}
```

**2. UIè¨­å®šæ–¹æ³•**:
- Toggle â†’ OnValueChanged(Boolean) â†’ Dynamic bool â†’ SetMeasurementDisabled
- Toggle.isOn = falseï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: è¨ˆæ¸¬æœ‰åŠ¹
- Toggle.isOn = trueï¼ˆãƒã‚§ãƒƒã‚¯æ™‚ï¼‰: è¨ˆæ¸¬åœæ­¢

#### å‹•ä½œ
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆãƒã‚§ãƒƒã‚¯ãªã—ï¼‰**: è¨ˆæ¸¬æ©Ÿèƒ½ONï¼ˆmeasurementEnabled = trueï¼‰
- **ãƒã‚§ãƒƒã‚¯æ™‚**: è¨ˆæ¸¬æ©Ÿèƒ½OFFï¼ˆmeasurementEnabled = falseï¼‰
  - å®šæœŸè¨ˆæ¸¬åœæ­¢ï¼ˆCancelInvokeï¼‰
  - å³æ™‚è¨ˆæ¸¬ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
  - å®Ÿè¡Œä¸­ã®Pythonãƒ—ãƒ­ã‚»ã‚¹ã‚’å³åº§ã«åœæ­¢
- **ãƒã‚§ãƒƒã‚¯è§£é™¤æ™‚**: è¨ˆæ¸¬æ©Ÿèƒ½ONå¾©å¸°
  - å®šæœŸè¨ˆæ¸¬å†é–‹ï¼ˆInvokeRepeatingï¼‰

#### åŠ¹æœ
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§è¨ˆæ¸¬æ©Ÿèƒ½å…¨ä½“ã‚’ON/OFFå¯èƒ½
- âœ… ãƒã‚§ãƒƒã‚¯æ™‚ã«å®Ÿè¡Œä¸­ã®è¨ˆæ¸¬ã‚‚å³åº§ã«åœæ­¢
- âœ… ãƒã‚§ãƒƒã‚¯è§£é™¤æ™‚ã«å®šæœŸè¨ˆæ¸¬ãŒè‡ªå‹•å†é–‹
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§çŠ¶æ…‹å¤‰åŒ–ã‚’ç¢ºèªå¯èƒ½
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æ±‚é€šã‚Šã®å‹•ä½œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆONã€ãƒã‚§ãƒƒã‚¯ã§OFFï¼‰

#### ä¿®æ­£å±¥æ­´
**åˆå›å®Ÿè£…ã®å•é¡Œ**: æœ‰åŠ¹åŒ–æ™‚ï¼ˆãƒã‚§ãƒƒã‚¯è§£é™¤æ™‚ï¼‰ã«InvokeRepeatingã®å†é–‹å‡¦ç†ãŒæ¬ è½
- ç„¡åŠ¹åŒ–å¾Œã€å†åº¦æœ‰åŠ¹åŒ–ã—ã¦ã‚‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«è¨ˆæ¸¬ãŒé–‹å§‹ã•ã‚Œãªã„ä¸å…·åˆ
- ä¿®æ­£: elseç¯€ã«`InvokeRepeating(nameof(StartMeasurement), 0f, measurementInterval)`ã‚’è¿½åŠ 

---

## ğŸ“… 2026-01-25ï¼ˆç¶šã4ï¼‰

### Phase 25: é€Ÿåº¦èª¿æ•´ä¿‚æ•°ã®å®Ÿè£…ï¼ˆè¦–è¦šçš„é€Ÿåº¦è£œæ­£æ©Ÿèƒ½ï¼‰

#### èƒŒæ™¯ãƒ»ç›®çš„
- ç²’å­ã¯æŠ•å½±ã™ã‚‹ãŒã€å·ã‚’è¨ˆæ¸¬ãƒ»è¦³æ¸¬ã™ã‚‹ä½ç½®ã¯å·ã‹ã‚‰é›¢ã‚Œã¦ã„ã‚‹
- å®Ÿéš›ã®é€Ÿåº¦ã‚ˆã‚Šé…ãè¦‹ãˆã‚‹å•é¡ŒãŒæ®‹å­˜
- è§£æ±ºç­–ï¼šå—ä¿¡é€Ÿåº¦ã«æ›ã‘ã‚‹èª¿æ•´ä¿‚æ•°ã‚’UIä¸Šã§æ‰‹å‹•èª¿æ•´å¯èƒ½ã«ã™ã‚‹

#### å®Ÿè£…å†…å®¹

**1. é€Ÿåº¦èª¿æ•´ä¿‚æ•°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ **ï¼ˆRiverFlowSimulation.cs:38-40ï¼‰:
```csharp
[Tooltip("é€Ÿåº¦èª¿æ•´ä¿‚æ•°ï¼ˆå—ä¿¡é€Ÿåº¦ã«æ›ã‘ã‚‹å€ç‡ã€è¦–è¦šçš„ãªé€Ÿåº¦èª¿æ•´ç”¨ï¼‰")]
[Range(0.1f, 10.0f)]
public float speedAdjustmentFactor = 1.0f;
```

**2. SetSpeedMultiplier()ä¿®æ­£**ï¼ˆRiverFlowSimulation.cs:448-463ï¼‰:
```csharp
public void SetSpeedMultiplier(float realWorldSpeed)
{
    // åŸºæº–é€Ÿåº¦ã«å¯¾ã™ã‚‹æ¯”ç‡ã‚’è¨ˆç®— Ã— èª¿æ•´ä¿‚æ•°
    float ratio = (realWorldSpeed / baseRealWorldSpeed) * speedAdjustmentFactor;

    if (mode == SimulationMode.NormalMode)
    {
        speedMultiplier = ratio;
        UnityEngine.Debug.Log($"[RiverFlowSimulation] é€Ÿåº¦è¨­å®š: {realWorldSpeed:F6} m/s Ã— {speedAdjustmentFactor:F2} â†’ speedMultiplier = {ratio:F3} (åŸºæº–é€Ÿåº¦: {baseRealWorldSpeed} m/s)");
    }
    else if (mode == SimulationMode.WaveMode)
    {
        waveSpeed = ratio;
        UnityEngine.Debug.Log($"[RiverFlowSimulation] é€Ÿåº¦è¨­å®š: {realWorldSpeed:F6} m/s Ã— {speedAdjustmentFactor:F2} â†’ waveSpeed = {ratio:F3} (åŸºæº–é€Ÿåº¦: {baseRealWorldSpeed} m/s)");
    }
}
```

**3. UIåˆ¶å¾¡é–¢æ•°è¿½åŠ **ï¼ˆRiverFlowSimulation.cs:494-502ï¼‰:
```csharp
/// <summary>
/// é€Ÿåº¦èª¿æ•´ä¿‚æ•°ã‚’è¨­å®šï¼ˆUI Sliderç”¨ï¼‰
/// è¦–è¦šçš„ãªé€Ÿåº¦èª¿æ•´ã«ä½¿ç”¨ï¼ˆè¦³æ¸¬ä½ç½®ãƒ»è§’åº¦ã«ã‚ˆã‚‹è¦‹ãˆæ–¹ã®é•ã„ã‚’è£œæ­£ï¼‰
/// </summary>
public void SetSpeedAdjustmentFactor(float factor)
{
    speedAdjustmentFactor = factor;
    UnityEngine.Debug.Log($"[RiverFlowSimulation] é€Ÿåº¦èª¿æ•´ä¿‚æ•°ã‚’{factor:F2}ã«è¨­å®š");
}
```

#### è¨ˆç®—ãƒ•ãƒ­ãƒ¼

**é€Ÿåº¦å¤‰æ›ã®å…¨ä½“åƒ**:
```
1. Pythonã‹ã‚‰å—ä¿¡: realWorldSpeedï¼ˆä¾‹: 0.015 m/sï¼‰
2. åŸºæº–é€Ÿåº¦æ¯”ç‡: 0.015 / 0.5 = 0.03
3. èª¿æ•´ä¿‚æ•°é©ç”¨: 0.03 Ã— speedAdjustmentFactor
4. æœ€çµ‚é€Ÿåº¦: speedMultiplier/waveSpeed
```

**è¨ˆç®—ä¾‹**ï¼ˆspeedAdjustmentFactor = 3.0ã®å ´åˆï¼‰:
```
å—ä¿¡é€Ÿåº¦: 0.015 m/s
åŸºæº–é€Ÿåº¦: 0.5 m/s
èª¿æ•´ä¿‚æ•°: 3.0
â†’ (0.015 / 0.5) Ã— 3.0 = 0.09
â†’ speedMultiplier = 0.09ï¼ˆå…ƒã®é€Ÿåº¦ã®9%ï¼‰
```

#### UIè¨­å®šæ–¹æ³•

**Sliderè¨­å®š**:
```
Slider â†’ OnValueChanged(Single)
  â””â”€ Dynamic float â†’ SetSpeedAdjustmentFactor
```

**æ¨å¥¨ç¯„å›²**:
- Min: 0.1ï¼ˆå®Ÿé€Ÿåº¦ã®10%ï¼‰
- Max: 10.0ï¼ˆå®Ÿé€Ÿåº¦ã®10å€ï¼‰
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼ˆè£œæ­£ãªã—ï¼‰

#### åŠ¹æœ

- âœ… è¦³æ¸¬ä½ç½®ãƒ»è§’åº¦ã«ã‚ˆã‚‹è¦‹ãˆæ–¹ã®é•ã„ã‚’è£œæ­£å¯èƒ½
- âœ… å®Ÿä¸–ç•Œã®é€Ÿåº¦ã‚’æ­£ç¢ºã«è¨ˆæ¸¬ã—ãªãŒã‚‰ã€è¦–è¦šçš„ãªèª¿æ•´ãŒå¯èƒ½
- âœ… UIä¸Šã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«èª¿æ•´å¯èƒ½
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§èª¿æ•´å¾Œã®å€¤ã‚’ç¢ºèªå¯èƒ½

#### èª¿æ•´æ–¹æ³•

**ç²’å­ãŒé…ã™ãã‚‹å ´åˆ**:
- speedAdjustmentFactorã‚’2.0, 3.0ã¨å¢—ã‚„ã™
- è‚‰çœ¼ã§è¦‹ãŸå·ã®é€Ÿåº¦ã¨ä¸€è‡´ã™ã‚‹ã¾ã§èª¿æ•´

**ç²’å­ãŒé€Ÿã™ãã‚‹å ´åˆ**:
- speedAdjustmentFactorã‚’0.5, 0.3ã¨æ¸›ã‚‰ã™

**æœ€é©ãªèª¿æ•´æ–¹æ³•**:
1. ã¾ãšåŸºæº–é€Ÿåº¦ï¼ˆbaseRealWorldSpeedï¼‰ã‚’å®Ÿéš›ã®å·ã®å¹³å‡é€Ÿåº¦ã«åˆã‚ã›ã‚‹
2. æ¬¡ã«èª¿æ•´ä¿‚æ•°ï¼ˆspeedAdjustmentFactorï¼‰ã§è¦–è¦šçš„ãªå¾®èª¿æ•´ã‚’è¡Œã†

---

## ğŸ“… 2026-01-25ï¼ˆç¶šã3ï¼‰

### Phase 24: é€Ÿåº¦å˜ä½ã®ä¿®æ­£ï¼ˆå®Ÿä¸–ç•Œé€Ÿåº¦ã¨æ­£è¦åŒ–åº§æ¨™ç³»ã®å¤‰æ›ï¼‰

#### å•é¡Œ
- Pythonã‹ã‚‰è¨ˆæ¸¬ã—ãŸé€Ÿåº¦ã‚’é©ç”¨ã™ã‚‹ã¨ã€ç²’å­ãŒå®Ÿéš›ã®å·ã‚ˆã‚Šã¯ã‚‹ã‹ã«é€Ÿãå‹•ã
- åŸå› ï¼šé€Ÿåº¦ã®å˜ä½ãŒæ··åœ¨
  - `velocity`ï¼šæ­£è¦åŒ–åº§æ¨™ç³»ï¼ˆ0-1ï¼‰ã§ã®é€Ÿåº¦
  - `speedMultiplier`ï¼šå®Ÿä¸–ç•Œã®é€Ÿåº¦ï¼ˆm/sï¼‰
  - ã“ã‚Œã‚‰ã‚’ç›´æ¥æ›ã‘ç®—ã—ã¦ã„ãŸ

#### æ ¹æœ¬åŸå› ï¼ˆRiverFlowSimulation.cs:318ï¼‰
```csharp
p.position += velocity * dt * speedMultiplier * ySpeedMultiplier;
```

**å•é¡Œç‚¹**:
- VectorField.baseSpeed = 0.5ï¼ˆæ­£è¦åŒ–åº§æ¨™ç³»ï¼‰
- speedMultiplier = 0.004605ï¼ˆm/sï¼‰
- å˜ä½ãŒç•°ãªã‚‹å€¤ã‚’æ›ã‘ç®— â†’ æ„å‘³ä¸æ˜ãªçµæœ

#### ä¿®æ­£å†…å®¹

**1. åŸºæº–é€Ÿåº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ **ï¼ˆRiverFlowSimulation.cs:34-36ï¼‰:
```csharp
[Tooltip("å®Ÿä¸–ç•Œã®åŸºæº–é€Ÿåº¦ [m/s]ï¼ˆã“ã®é€Ÿåº¦ã®æ™‚speedMultiplier=1.0ã¨ãªã‚‹ï¼‰")]
[Min(0.01f)]
public float baseRealWorldSpeed = 0.5f;
```

**2. SetSpeedMultiplier()ä¿®æ­£**ï¼ˆRiverFlowSimulation.cs:444-462ï¼‰:
```csharp
public void SetSpeedMultiplier(float realWorldSpeed)
{
    // åŸºæº–é€Ÿåº¦ã«å¯¾ã™ã‚‹æ¯”ç‡ã‚’è¨ˆç®—
    float ratio = realWorldSpeed / baseRealWorldSpeed;

    if (mode == SimulationMode.NormalMode)
    {
        speedMultiplier = ratio;
        UnityEngine.Debug.Log($"[RiverFlowSimulation] é€Ÿåº¦è¨­å®š: {realWorldSpeed:F6} m/s â†’ speedMultiplier = {ratio:F3} (åŸºæº–é€Ÿåº¦: {baseRealWorldSpeed} m/s)");
    }
    else if (mode == SimulationMode.WaveMode)
    {
        waveSpeed = ratio;
        UnityEngine.Debug.Log($"[RiverFlowSimulation] é€Ÿåº¦è¨­å®š: {realWorldSpeed:F6} m/s â†’ waveSpeed = {ratio:F3} (åŸºæº–é€Ÿåº¦: {baseRealWorldSpeed} m/s)");
    }
}
```

#### å‹•ä½œåŸç†

**åŸºæº–é€Ÿåº¦æ–¹å¼**:
- `baseRealWorldSpeed = 0.5 m/s`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã®æ™‚ã€speedMultiplier = 1.0ã¨ãªã‚‹
- Pythonã‹ã‚‰å—ä¿¡ã—ãŸé€Ÿåº¦ã‚’åŸºæº–é€Ÿåº¦ã§å‰²ã£ã¦æ¯”ç‡ã«å¤‰æ›
- æ¯”ç‡ã‚’speedMultiplier/waveSpeedã«è¨­å®š

**è¨ˆç®—ä¾‹**:
- Pythonã‹ã‚‰å—ä¿¡: 0.015 m/s
- åŸºæº–é€Ÿåº¦: 0.5 m/s
- æ¯”ç‡: 0.015 / 0.5 = 0.03
- speedMultiplier = 0.03ï¼ˆå…ƒã®é€Ÿåº¦ã®3%ï¼‰

#### åŠ¹æœ
- âœ… å®Ÿä¸–ç•Œã®é€Ÿåº¦ï¼ˆm/sï¼‰ãŒæ­£ã—ãæ­£è¦åŒ–åº§æ¨™ç³»ã®é€Ÿåº¦ã«å¤‰æ›ã•ã‚Œã‚‹
- âœ… ç²’å­ã®é€Ÿåº¦ãŒå®Ÿéš›ã®å·ã®é€Ÿåº¦ã¨ä¸€è‡´ã™ã‚‹
- âœ… åŸºæº–é€Ÿåº¦ã‚’Inspectorä¸Šã§èª¿æ•´å¯èƒ½
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§å¤‰æ›å¾Œã®å€¤ã‚’ç¢ºèªå¯èƒ½

#### èª¿æ•´æ–¹æ³•
**åŸºæº–é€Ÿåº¦ãŒé©åˆ‡ã§ãªã„å ´åˆ**:
1. Inspectorä¸Šã§`Base Real World Speed`ã‚’èª¿æ•´
2. å®Ÿéš›ã®å·ã®é€Ÿåº¦è¨ˆæ¸¬çµæœã«åŸºã¥ã„ã¦è¨­å®š
3. speedMultiplier = 1.0ã®æ™‚ã®ç²’å­é€Ÿåº¦ãŒé©åˆ‡ã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´

---

## ğŸ“… 2026-01-25ï¼ˆç¶šã2ï¼‰

### Phase 23: é€Ÿåº¦é–¾å€¤åˆ¤å®šã®ä¿®æ­£ï¼ˆè¨ˆæ¸¬æˆåŠŸãƒ­ã‚°è¡¨ç¤ºå•é¡Œã®è§£æ±ºï¼‰

#### å•é¡Œ
- è¨ˆæ¸¬æˆåŠŸæ™‚ã«UI Textã«ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œãªã„
- è¨ˆæ¸¬é–‹å§‹ãƒ»å¤±æ•—ãƒ­ã‚°ã¯è¡¨ç¤ºã•ã‚Œã‚‹ãŒã€æˆåŠŸãƒ­ã‚°ãŒå‡ºãªã„
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°: `-0.004069 m/s < 0.01 m/s` â†’ å¤±æ•—åˆ¤å®š
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°: `0.004605 m/s < 0.01 m/s` â†’ å¤±æ•—åˆ¤å®š

#### æ ¹æœ¬åŸå› 
**é€Ÿåº¦åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã®èª¤ã‚Š**ï¼ˆCameraSpeedReceiver.cs:306ï¼‰:
```csharp
if (speed < minimumValidSpeed)  // è² ã®å€¤ã¯å¸¸ã«ã“ã®æ¡ä»¶ã«è©²å½“
```

**å•é¡Œç‚¹**:
- è² ã®é€Ÿåº¦ï¼ˆé€†æµï¼‰ãŒå¸¸ã«é–¾å€¤ä»¥ä¸‹ã¨åˆ¤å®šã•ã‚Œã‚‹
- STIVæ³•ã§ã¯è² ã®é€Ÿåº¦ã‚‚æœ‰åŠ¹ãªè¨ˆæ¸¬çµæœï¼ˆPhase 21å‚ç…§ï¼‰
  - æ­£ã®é€Ÿåº¦ï¼šå·¦ã‹ã‚‰å³ã®æµã‚Œ
  - è² ã®é€Ÿåº¦ï¼šå³ã‹ã‚‰å·¦ã®æµã‚Œï¼ˆé€†æµï¼‰

#### ä¿®æ­£å†…å®¹ï¼ˆCameraSpeedReceiver.cs:306-309ï¼‰

**å¤‰æ›´å‰**:
```csharp
if (speed < minimumValidSpeed)
{
    UnityEngine.Debug.LogWarning($"[CameraSpeedReceiver] è¨ˆæ¸¬å¤±æ•—: é€Ÿåº¦ãŒé–¾å€¤ä»¥ä¸‹ ({speed:F6} m/s < {minimumValidSpeed} m/s) - é€Ÿåº¦ã‚’æ›´æ–°ã—ã¾ã›ã‚“");
```

**å¤‰æ›´å¾Œ**:
```csharp
if (Mathf.Abs(speed) < minimumValidSpeed)
{
    UnityEngine.Debug.LogWarning($"[CameraSpeedReceiver] è¨ˆæ¸¬å¤±æ•—: é€Ÿåº¦ãŒé–¾å€¤ä»¥ä¸‹ (|{speed:F6}| m/s < {minimumValidSpeed} m/s) - é€Ÿåº¦ã‚’æ›´æ–°ã—ã¾ã›ã‚“");
```

#### åŠ¹æœ
- âœ… è² ã®é€Ÿåº¦ã‚‚æœ‰åŠ¹ãªè¨ˆæ¸¬çµæœã¨ã—ã¦èªè­˜
- âœ… é€Ÿåº¦ã®çµ¶å¯¾å€¤ãŒé–¾å€¤ä»¥ä¸Šãªã‚‰è¨ˆæ¸¬æˆåŠŸã¨åˆ¤å®š
- âœ… UI Textã«è¨ˆæ¸¬æˆåŠŸãƒ­ã‚°ãŒæ­£å¸¸è¡¨ç¤º
- âœ… é€†æµï¼ˆè² ã®é€Ÿåº¦ï¼‰ã‚‚æ­£ã—ãè¨ˆæ¸¬ãƒ»è¡¨ç¤ºå¯èƒ½

#### åˆ¤å®šä¾‹
- `|âˆ’0.004069| = 0.004069 < 0.01` â†’ å¤±æ•—ï¼ˆé–¾å€¤ä»¥ä¸‹ï¼‰
- `|0.004605| = 0.004605 < 0.01` â†’ å¤±æ•—ï¼ˆé–¾å€¤ä»¥ä¸‹ï¼‰
- `|âˆ’0.015| = 0.015 > 0.01` â†’ æˆåŠŸï¼ˆé€†æµã‚’æ¤œå‡ºï¼‰
- `|0.015| = 0.015 > 0.01` â†’ æˆåŠŸï¼ˆé †æµã‚’æ¤œå‡ºï¼‰

---

## ğŸ“… 2026-01-25ï¼ˆç¶šãï¼‰

### Phase 22ï¼ˆç¶šãï¼‰: MeasurementLogger UI Textæ›´æ–°å•é¡Œã®ä¿®æ­£

#### å•é¡Œ
- è¨ˆæ¸¬çµæœãƒ­ã‚°ãŒUI Textã«è¡¨ç¤ºã•ã‚Œãªã„
- è¨ˆæ¸¬æˆåŠŸãƒ»å¤±æ•—æ™‚ã®ãƒ­ã‚°ãŒåæ˜ ã•ã‚Œãªã„

#### åŸå› èª¿æŸ»
MeasurementLogger.csã®UpdateText()å®Ÿè£…ã‚’ç¢ºèªï¼š
- `string.Join("\n", logQueue)` - Queue<string>ã‚’ç›´æ¥Joinã—ã¦ã„ãŸ
- logTextãŒnullã®å ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã—
- ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãŒãªãã€å‹•ä½œç¢ºèªå›°é›£

#### ä¿®æ­£å†…å®¹ï¼ˆMeasurementLogger.csï¼‰

**1. UpdateText()ã®æ”¹å–„ï¼ˆ99-121è¡Œï¼‰**:
```csharp
private void UpdateText()
{
    if (logText != null)
    {
        if (logQueue.Count > 0)
        {
            // Queue<string>ã‚’é…åˆ—ã«å¤‰æ›ã—ã¦ã‹ã‚‰Join
            string[] logs = logQueue.ToArray();
            logText.text = string.Join("\n", logs);
        }
        else
        {
            logText.text = "";
        }
    }
    else
    {
        UnityEngine.Debug.LogWarning("[MeasurementLogger] logTextãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“");
    }
}
```

**2. ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è¿½åŠ **:
- AddLog()ï¼ˆ96è¡Œï¼‰: `[MeasurementLogger] ãƒ­ã‚°è¿½åŠ : {log}`
- Update()ï¼ˆ34è¡Œï¼‰: `[MeasurementLogger] ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§ãƒ­ã‚°å‡¦ç†: {log}, logQueue.Count={logQueue.Count}`
- UpdateText()ï¼ˆ119è¡Œï¼‰: `[MeasurementLogger] logTextãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“`ï¼ˆè­¦å‘Šï¼‰

#### åŠ¹æœ
- âœ… Queue<string>ã‚’é…åˆ—ã«å¤‰æ›ã—ã¦ã‹ã‚‰ç¢ºå®Ÿã«Join
- âœ… logTextãŒnullã®å ´åˆã¯è­¦å‘Šãƒ­ã‚°ã§å³åº§ã«æ¤œçŸ¥å¯èƒ½
- âœ… ãƒ­ã‚°è¿½åŠ ãƒ»å‡¦ç†ã®å„æ®µéšã‚’ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§è¿½è·¡å¯èƒ½
- âœ… è¨ˆæ¸¬æˆåŠŸãƒ»å¤±æ•—æ™‚ã®ãƒ­ã‚°ãŒç¢ºå®Ÿã«UI Textã«åæ˜ 

#### è¿½åŠ ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ç¢ºèªç”¨ï¼‰
- LogSuccess()ï¼ˆ53è¡Œï¼‰: `[MeasurementLogger] LogSuccesså‘¼ã³å‡ºã—: {speed}`
- LogFailure()ï¼ˆ64è¡Œï¼‰: `[MeasurementLogger] LogFailureå‘¼ã³å‡ºã—: speed={speed}, threshold={threshold}`
- LogStart()ï¼ˆ75è¡Œï¼‰: `[MeasurementLogger] LogStartå‘¼ã³å‡ºã—`
- LogError()ï¼ˆ86è¡Œï¼‰: `[MeasurementLogger] LogErrorå‘¼ã³å‡ºã—: {message}`

#### CameraSpeedReceiver.csä¿®æ­£
- logger null ãƒã‚§ãƒƒã‚¯å¼·åŒ–ï¼ˆ212-220è¡Œï¼‰
- logger.LogStart()å‘¼ã³å‡ºã—å‰ã«ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°å‡ºåŠ›

#### ç¢ºèªäº‹é …ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å´ï¼‰
- [x] MeasurementLoggerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Inspectorã§`Log Text`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«UI Textè¨­å®š
- [x] CameraSpeedReceiverã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Inspectorã§`Logger`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«MeasurementLoggerè¨­å®š
- [x] ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§å‹•ä½œç¢ºèªå®Œäº†
- [x] è¨ˆæ¸¬å¤±æ•—æ™‚ã®ãƒ­ã‚°ãŒUI Textã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

#### æˆæœ
- âœ… è¨ˆæ¸¬é–‹å§‹ãƒ»æˆåŠŸãƒ»å¤±æ•—ãƒ»ã‚¨ãƒ©ãƒ¼ã®å…¨ãƒ­ã‚°ãŒUI Textã«æ­£å¸¸è¡¨ç¤º
- âœ… Thread-safeå‡¦ç†ã§åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰ã‹ã‚‰ã®ãƒ­ã‚°è¿½åŠ ã«å¯¾å¿œ
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§å„å‡¦ç†æ®µéšã‚’è¿½è·¡å¯èƒ½
- âœ… Inspectorè¨­å®šãƒŸã‚¹ã‚’å³åº§ã«æ¤œçŸ¥å¯èƒ½ï¼ˆè­¦å‘Šãƒ­ã‚°ï¼‰

---

## ğŸ“… 2026-01-25ï¼ˆç¶šãï¼‰

### Phase 22: UIå®Ÿè£…ï¼ˆã‚«ãƒ¡ãƒ©è¨ˆæ¸¬ãƒ»Bloomåˆ¶å¾¡ï¼‰ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ UIã§ã‚«ãƒ¡ãƒ©è¨ˆæ¸¬ã¨Bloom Intensityã‚’åˆ¶å¾¡å¯èƒ½ã«ã™ã‚‹

#### å®Ÿè£…å†…å®¹

**1. STIVæ¤œå‡ºãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒ¢ãƒ¼ãƒ‰åˆ¥è¨­å®š**:
- ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰OFFæ™‚ï¼šåŸºæº–å€¤ã‚’ä½¿ç”¨ï¼ˆsigmaPre: 1.0, sigmaTensor: 2.0, maxFrames: 300ï¼‰
- ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ONæ™‚ï¼šInspectorè¨­å®šå€¤ã‚’ä½¿ç”¨

**2. å³æ™‚è¨ˆæ¸¬ãƒœã‚¿ãƒ³å®Ÿè£…**ï¼ˆCameraSpeedReceiver.csï¼‰:
- public Button measureButton è¿½åŠ 
- UpdateButtonState() å®Ÿè£…
- Update()ã§isProcessingå¤‰æ›´ç›£è¦–
- è¨ˆæ¸¬ä¸­ï¼ˆisProcessing = trueï¼‰ï¼šãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼‰
- è¨ˆæ¸¬å®Œäº†ï¼ˆisProcessing = falseï¼‰ï¼šãƒœã‚¿ãƒ³æœ‰åŠ¹åŒ–

**UIè¨­å®šæ–¹æ³•**:
- Button â†’ OnClick() â†’ CameraSpeedReceiver â†’ StartMeasurementNow()
- Inspectorã§Measure Buttonãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨­å®š

**3. è¨ˆæ¸¬é–“éš”è¨­å®šã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼**:
- é–¢æ•°åï¼šSetMeasurementInterval(float)
- ç¯„å›²ï¼š15ï½300ç§’
- åŸºæº–å€¤ï¼š15ç§’

**4. ã‚«ãƒ¡ãƒ©åä¿®æ­£**:
- èª¤ï¼šHFD Camera â†’ æ­£ï¼šFHD Camera
- WMIã§ç¢ºèªã—ãŸã‚«ãƒ¡ãƒ©ä¸€è¦§ï¼šFHD Camera, ASUS IR camera, ASUS FHD webcam

**5. GlobalVolumeController.csæ–°è¦ä½œæˆ**:
- Bloomã®Intensityåˆ¶å¾¡ã‚¯ãƒ©ã‚¹
- public Volume globalVolumeï¼ˆInspectorè¨­å®šï¼‰
- SetIntensity(float)é–¢æ•°ï¼ˆUI Sliderç”¨ï¼‰
- bloom.intensity.overrideState = true ã§å³åº§ã«åæ˜ 

**UIè¨­å®šæ–¹æ³•**:
- Slider â†’ OnValueChanged(Single) â†’ Dynamic float â†’ SetIntensity
- Inspectorã§Global Volumeãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾è±¡Volumeè¨­å®š

#### åŠ¹æœ
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§å³æ™‚è¨ˆæ¸¬ãƒ»é–“éš”è¨­å®šãŒå¯èƒ½
- âœ… è¨ˆæ¸¬ä¸­ã®ãƒœã‚¿ãƒ³é€£æ‰“é˜²æ­¢
- âœ… Bloom Intensityã‚’ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§èª¿æ•´å¯èƒ½ï¼ˆç²’å­ã®å…‰ã®å¼·åº¦åˆ¶å¾¡ï¼‰
- âœ… ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã¨æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§é©åˆ‡ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ

---

## ğŸ“… 2026-01-25

### Phase 21ï¼ˆå®Œäº†ï¼‰: Python-Unityçµ±åˆãƒ»å¤–éƒ¨ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹å®Ÿè£…

#### ç›®çš„
å¤–éƒ¨USBã‚«ãƒ¡ãƒ©ï¼ˆeMeet C960ï¼‰ã§å·ã®é€Ÿåº¦ã‚’è¨ˆæ¸¬ã—ã€RiverFlowSimulationã®é€Ÿåº¦ã«åæ˜ 

#### å®Ÿè£…å†…å®¹

**1. baseline_stiv.pyã‚’Unityãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚³ãƒ”ãƒ¼**:
- ã‚³ãƒ”ãƒ¼å…ƒ: `D:\imamura\work\SurfaceVelocimetry\src\baseline_stiv.py`
- ã‚³ãƒ”ãƒ¼å…ˆ: `Assets/StreamingAssets/PythonScripts/baseline_stiv.py`
- ã‚«ãƒ¡ãƒ©æƒ…å ±å‡ºåŠ›æ©Ÿèƒ½è¿½åŠ ï¼ˆIDã€è§£åƒåº¦ã€FPSã€Backendï¼‰

**2. CameraSpeedReceiver.cså®Ÿè£…**:
- ã‚«ãƒ¡ãƒ©IDè¨­å®šæ©Ÿèƒ½ï¼ˆ0-1: å†…è”µã‚«ãƒ¡ãƒ©ã€2ä»¥é™: ã‚«ãƒ¡ãƒ©åå¿…é ˆï¼‰
- Python subprocesså®Ÿè¡Œãƒ»é€Ÿåº¦å€¤å—ä¿¡
- è‡ªå‹•é€Ÿåº¦åæ˜ æ©Ÿèƒ½ï¼ˆRiverFlowSimulation.SetSpeedMultiplierï¼‰
- è¨ˆæ¸¬å¤±æ•—åˆ¤å®šï¼ˆminimumValidSpeedé–¾å€¤ï¼‰

**3. å¤–éƒ¨ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹å•é¡Œã®è§£æ±º**:

**å•é¡Œ**:
- eMeet C960ãŒOpenCVåˆ—æŒ™ï¼ˆID 0-1ï¼‰ã«å«ã¾ã‚Œãªã„
- DirectShowã§ã‚«ãƒ¡ãƒ©åæŒ‡å®šãŒå¤±æ•—
  - ã‚¨ãƒ©ãƒ¼: `VIDEOIO(DSHOW): backend is generally available but can't be used to capture by name`

**è§£æ±ºç­–: ã‚«ãƒ¡ãƒ©åâ†’IDå¤‰æ›é–¢æ•°**:
- `find_camera_id_by_name()` è¿½åŠ ï¼ˆbaseline_stiv.py:38-71ï¼‰
- WMIã§Windowsã®ã‚«ãƒ¡ãƒ©ãƒªã‚¹ãƒˆã‚’å–å¾—
- ã‚«ãƒ¡ãƒ©åãŒä¸€è‡´ã™ã‚‹ãƒ‡ãƒã‚¤ã‚¹ã®OpenCV IDã‚’ç‰¹å®š
- IDæŒ‡å®šã§`cv2.VideoCapture()`ã‚’é–‹ã

**ã‚³ãƒ¼ãƒ‰**:
```python
def find_camera_id_by_name(camera_name: str) -> Optional[int]:
    try:
        import wmi
        c = wmi.WMI()
        cameras = c.Win32_PnPEntity(PNPClass="Camera")

        camera_index = 0
        for cam in cameras:
            if camera_name in cam.Name:
                for test_id in range(10):
                    cap = cv2.VideoCapture(test_id)
                    if cap.isOpened():
                        cap.release()
                        if test_id == camera_index:
                            return test_id
                camera_index += 1
        return None
    except Exception as e:
        print(f"[ERROR] Failed to find camera by name: {e}")
        return None
```

**å‹•ä½œçµæœ**:
```
[INFO] Camera 'HD Webcam eMeet C960' found at ID 0
=== Camera Information ===
Camera ID: HD Webcam eMeet C960
Resolution: 640x480
FPS: 30.0
Backend: MSMF
=========================
Estimated Surface Velocity: -0.007968 [m/s]
```

âœ… **eMeet C960ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸ**

#### æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿
- âœ… ID 0, 1ï¼ˆæ•°å€¤æŒ‡å®šï¼‰: æ—¢å­˜å‹•ä½œãã®ã¾ã¾ï¼ˆå½±éŸ¿ãªã—ï¼‰
- âœ… ã‚«ãƒ¡ãƒ©åï¼ˆæ–‡å­—åˆ—æŒ‡å®šï¼‰: WMIæ¤œç´¢ â†’ IDå¤‰æ›ï¼ˆæ–°æ©Ÿèƒ½ï¼‰

#### æ®‹èª²é¡Œ
- [ ] é€Ÿåº¦é–¾å€¤åˆ¤å®šã®æ”¹å–„ï¼ˆçµ¶å¯¾å€¤åˆ¤å®š or é–¾å€¤èª¿æ•´ï¼‰
- [ ] NumPyãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆ`numpy<2`ï¼‰

---

## âš ï¸ æ•™è¨“è¿½åŠ ï¼ˆ2026-01-25ï¼‰

### 10. å®‰æ˜“ã«è«¦ã‚ãªã„ãƒ»ç°¡å˜ãªè§£æ±ºç­–ã‚’è¦‹è½ã¨ã•ãªã„

**å•é¡Œ**: DirectShowã§ã‚«ãƒ¡ãƒ©åã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ â†’ ã€Œä½¿ç”¨ã§ãã¾ã›ã‚“ã€ã¨è«¦ã‚ãŸ

**æ ¹æœ¬åŸå› **:
- 1ã¤ã®æ–¹æ³•ãŒå¤±æ•—ã—ãŸã ã‘ã§è«¦ã‚ãŸ
- ã‚«ãƒ¡ãƒ©åâ†’IDå¤‰æ›ã¨ã„ã†åŸºæœ¬çš„ãªç™ºæƒ³ãŒã§ããªã‹ã£ãŸ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€ŒOpenCVã«ç™»éŒ²ã—ãŸã‚‰ãˆãˆã‚„ã‚“ã€ã§æ°—ã¥ã„ãŸ

**æ­£ã—ã„å¯¾å¿œ**:
1. **[MANDATORY]** 1ã¤ã®æ–¹æ³•ãŒå¤±æ•—ã—ã¦ã‚‚ã€åˆ¥ã®è§’åº¦ã‹ã‚‰è€ƒãˆã‚‹
2. **[MANDATORY]** ã€Œã§ãã¾ã›ã‚“ã€ã¨è«¦ã‚ã‚‹å‰ã«ã€è¤‡æ•°ã®è§£æ±ºç­–ã‚’æ¤œè¨ã™ã‚‹
3. **[MANDATORY]** ç°¡å˜ãªè§£æ±ºç­–ï¼ˆã‚«ãƒ¡ãƒ©åâ†’IDå¤‰æ›ï¼‰ã‚’è¦‹è½ã¨ã•ãªã„

**é•åã®çµæœ**:
**å®‰æ˜“ãªè«¦ã‚ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¿¡é ¼ã‚’å®Œå…¨ã«å¤±ã†ã€‚ç°¡å˜ã§ã—ã‚‡ã†ã‚‚ãªã„ã“ã¨ã‚’è«¦ã‚ã¦ã¯ãªã‚‰ãªã„ã€‚**

---

#### æµã‚Œæ–¹å‘è¦ç´„ï¼ˆSTIVï¼‰

**è³ªå•**: ã‚«ãƒ¡ãƒ©ã‹ã‚‰è¦‹ã¦å·¦ã‹ã‚‰å³ã«æµã‚Œã¦ã‚‹ã®ã‚’æ­£ã¨ã—ã¦è¦‹ã¦ã‚‹ã®ã‹ï¼Ÿ

**å›ç­”**: ã¯ã„ã€ãã®é€šã‚Šã§ã™ã€‚

**STIVã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æµã‚Œæ–¹å‘è¦ç´„**:
- baseline_stiv.pyã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ©ã‚¤ãƒ³åº§æ¨™: `--line-start 100 240 --line-end 540 240`
- ç”»åƒåº§æ¨™ç³»ã§X=100 â†’ X=540ï¼ˆå·¦ã‹ã‚‰å³ï¼‰
- **æ­£ã®é€Ÿåº¦**: line_start â†’ line_end æ–¹å‘ = **å·¦ã‹ã‚‰å³ã®æµã‚Œ**
- **è² ã®é€Ÿåº¦**: line_end â†’ line_start æ–¹å‘ = **å³ã‹ã‚‰å·¦ã®æµã‚Œ**

**ãƒ†ã‚¹ãƒˆçµæœã®è§£é‡ˆ**:
- -0.012404 m/s, -0.002767 m/sï¼ˆè² ï¼‰ = å³ã‹ã‚‰å·¦ã¸ã®å‹•ã
- 0.015303 m/sï¼ˆæ­£ï¼‰ = å·¦ã‹ã‚‰å³ã¸ã®å‹•ã

---

## ğŸ“… 2026-01-23ï¼ˆç¶šãï¼‰

### Phase 21ï¼ˆç¶šãï¼‰: Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆç‰¹å®š

#### èª¿æŸ»çµæœ

**ã‚«ãƒ¡ãƒ©ã‚¢ã‚¯ã‚»ã‚¹ + é€Ÿåº¦è¨ˆæ¸¬Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç‰¹å®š**:

`D:\imamura\work\SurfaceVelocimetry\notebooks`å†…ã®å…¨ãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã‚’èª¿æŸ»ã—ãŸçµæœã€ä»¥ä¸‹ã‚’ç¢ºèªï¼š

**æœ€æ–°ãƒ•ã‚¡ã‚¤ãƒ«**:
- **ãƒ•ã‚¡ã‚¤ãƒ«å**: `AdaptiveSTIV.ipynb`
- **ãƒ•ãƒ«ãƒ‘ã‚¹**: `D:\imamura\work\SurfaceVelocimetry\notebooks\AdaptiveSTIV.ipynb`
- **æœ€çµ‚æ›´æ–°**: 2026å¹´1æœˆ19æ—¥ 13:26
- **æ–¹å¼**: YOLO + STIVæ³•ï¼ˆSpace-Time Image Velocimetryï¼‰
- **ã‚«ãƒ¡ãƒ©ID**: 1
- **å‡ºåŠ›å˜ä½**: m/sï¼ˆç‰©ç†å˜ä½ï¼‰
- **ç‰¹å¾´**: YOLOã«ã‚ˆã‚‹ç‰©ä½“æ¤œå‡ºã§ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆm/pxï¼‰ã‚’è‡ªå‹•è£œæ­£

**ä»–ã®å€™è£œ**:
- `SurfaceVelocimetry.ipynb` (2026-01-18 16:00) - YOLO + ByteTrackã€px/så‡ºåŠ›ã€CSVä¿å­˜æ©Ÿèƒ½ã‚ã‚Š
- `STIV.ipynb` (2026-01-19 13:03) - STIVæ³•ã®ã¿ã€ã‚«ãƒ¡ãƒ©ID 0
- `tracking_speed.ipynb` (2026-01-18 12:08) - ãƒ›ãƒ¢ã‚°ãƒ©ãƒ•ã‚£å¤‰æ›å¿…é ˆï¼ˆå®Ÿè¡Œä¸å¯ï¼‰

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: AdaptiveSTIV.ipynbã‚’Unityé€£æºç”¨.pyãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›

#### .ipynb â†’ .py å¤‰æ›å®Œäº†

**å…ƒãƒ•ã‚¡ã‚¤ãƒ«**: `D:\imamura\work\SurfaceVelocimetry\notebooks\AdaptiveSTIV.ipynb` ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ã€æ¯€æãªã—ï¼‰

**å¤‰æ›å¾Œãƒ•ã‚¡ã‚¤ãƒ«**:
- **ãƒ•ã‚¡ã‚¤ãƒ«å**: `river_speed_camera.py`
- **ãƒ•ãƒ«ãƒ‘ã‚¹**: `D:\seimiya\Unity\RiverProjectionMap_ver26110\Assets\StreamingAssets\PythonScripts\river_speed_camera.py`
- **é…ç½®ç†ç”±**: StreamingAssetsã¯ãƒ“ãƒ«ãƒ‰å¾Œã‚‚å«ã¾ã‚Œã‚‹ãŸã‚

**å¤‰æ›å†…å®¹**:
- âœ… ã‚³ãƒ¼ãƒ‰ã‚»ãƒ«ã®ã¿ã‚’æŠ½å‡º
- âœ… matplotlibé–¢é€£å‰Šé™¤ï¼ˆplt.figure, plt.showç­‰ï¼‰
- âœ… %matplotlib inlineå‰Šé™¤
- âœ… ãƒ†ã‚¹ãƒˆå®Ÿè¡Œéƒ¨åˆ†å‰Šé™¤
- âœ… ç„¡é™ãƒ«ãƒ¼ãƒ—åŒ–ï¼ˆç¶™ç¶šçš„ã«é€Ÿåº¦è¨ˆæ¸¬ï¼‰
- âœ… æ¨™æº–å‡ºåŠ›ã«print()ã§é€Ÿåº¦å€¤ã‚’å‡ºåŠ›ï¼ˆUnityé€£æºç”¨ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ 
- âœ… "READY"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§Unityå´ã«æº–å‚™å®Œäº†ã‚’é€šçŸ¥

**å‡ºåŠ›å½¢å¼**:
```
READY
1.2345
1.3456
1.2789
...
```

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: CameraSpeedReceiver.csã®`scriptPath`ã‚’è¨­å®šã—ã¦å‹•ä½œãƒ†ã‚¹ãƒˆ

---

## ğŸ“… 2026-01-23

### Phase 20: UIå®Ÿè£…ã®ä¿®æ­£ã¨å®Œæˆï¼ˆå®Œäº† âœ…ï¼‰

#### å•é¡Œï¼šãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆæ™‚ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ¶ˆå¤±
**ç—‡çŠ¶**: SetWaveMode()ã§ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒæµã‚Œãªããªã‚‹

**åŸå› **:
- ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆæ™‚ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®å†åˆæœŸåŒ–ãŒè¡Œã‚ã‚Œã¦ã„ãªã„
- WaveMode â†’ NormalMode: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒéè¡¨ç¤ºä½ç½®ï¼ˆx: -10ï¼‰ã®ã¾ã¾
- NormalMode â†’ WaveMode: NormalModeã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«é…ç½®ã®ã¾ã¾

**è§£æ±ºç­–**: SetWaveMode()ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å†åˆæœŸåŒ–å‡¦ç†ã‚’è¿½åŠ 
```csharp
// WaveModeåˆ‡ã‚Šæ›¿ãˆæ™‚
particles.Clear();
InitializeWave();
StartWaving();

// NormalModeåˆ‡ã‚Šæ›¿ãˆæ™‚
CancelInvoke(nameof(SpawnWave));
particles.Clear();
InitializeNormal();
```

---

#### å•é¡Œï¼šé€Ÿåº¦Sliderã®è¨­è¨ˆ
**ç—‡çŠ¶**:
- NormalModeç”¨ã®é€Ÿåº¦å€ç‡Sliderã‚’å¤‰æ›´ã™ã‚‹ã¨ã€WaveModeã®æºã‚Œå…·åˆã‚‚å¤‰ã‚ã‚‹
- WaveModeã§speedMultiplierãŒä½¿ç”¨ã•ã‚Œã€é€Ÿåº¦ã‚’é…ãã™ã‚‹ã¨å£ãŒå´©ã‚Œã‚‹

**åŸå› **:
- UpdateParticlesWave()å†…ã§speedMultiplierã‚’ä½¿ç”¨
- é€Ÿåº¦SliderãŒNormalModeå°‚ç”¨ãªã®ã«ã€WaveModeã§ã‚‚é©ç”¨ã•ã‚Œã¦ã„ãŸ

**è§£æ±ºç­–**: é€Ÿåº¦Sliderã‚’ä¸¡ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã«å¤‰æ›´

**1. SetSpeedMultiplier()ã‚’ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šã«å¤‰æ›´**:
```csharp
public void SetSpeedMultiplier(float speed)
{
    if (mode == SimulationMode.NormalMode)
    {
        speedMultiplier = speed;
    }
    else if (mode == SimulationMode.WaveMode)
    {
        waveSpeed = speed;
    }
}
```

**2. UpdateParticlesWave()ã‹ã‚‰speedMultiplierå‰Šé™¤**:
```csharp
// å¤‰æ›´å‰
p.position.x += waveSpeed * Time.deltaTime + velocity.x * dt * speedMultiplier * waveUndulationStrength;
p.position.y += velocity.y * dt * speedMultiplier * waveUndulationStrength;

// å¤‰æ›´å¾Œ
p.position.x += waveSpeed * Time.deltaTime + velocity.x * dt * waveUndulationStrength;
p.position.y += velocity.y * dt * waveUndulationStrength;
```

**3. SetWaveSpeed()å‰Šé™¤**:
- SetSpeedMultiplier()ã«çµ±åˆã•ã‚ŒãŸãŸã‚ä¸è¦

---

#### UIå®Ÿè£…å®Œæˆ

**å…¨UIåˆ¶å¾¡é–¢æ•°ï¼ˆ10å€‹ï¼‰**:

| # | é–¢æ•°å | å‹ | ç”¨é€” | å‚™è€ƒ |
|---|--------|----|----|------|
| 1 | SetWaveMode(bool) | Toggle | WaveMode ON/OFF | ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å†åˆæœŸåŒ–å¯¾å¿œ |
| 2 | SetRandomizeWaveWidth(bool) | Toggle | æ³¢ã®å¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ– | - |
| 3 | SetSpeedMultiplier(float) | Slider | é€Ÿåº¦ | ä¸¡ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ |
| 4 | SetWaveInterval(float) | Slider | å£ã®ç”Ÿæˆé–“éš” | WaveModeå°‚ç”¨ |
| 5 | SetWaveUndulationStrength(float) | Slider | æ³¢ã®æºã‚Œå¼·åº¦ | WaveModeå°‚ç”¨ã€0=å£ã€1=æ³¢ |
| 6 | SetWaveWidthMaxMultiplier(float) | Slider | æ³¢ã®å¹…æœ€å¤§å€ç‡ | WaveModeå°‚ç”¨ |
| 7 | SetParticleColorR(float) | Slider | èµ¤æˆåˆ† | 0ï½1 |
| 8 | SetParticleColorG(float) | Slider | ç·‘æˆåˆ† | 0ï½1 |
| 9 | SetParticleColorB(float) | Slider | é’æˆåˆ† | 0ï½1 |
| 10 | ~~SetWaveSpeed~~ | - | - | å‰Šé™¤ï¼ˆSetSpeedMultiplierçµ±åˆï¼‰ |

---

#### ã‚³ãƒ¼ãƒ‰ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**VectorFieldTest.cs**:
- Start()å†…ã®ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°2è¡Œå‰Šé™¤
- ä¸è¦ãªåˆæœŸãƒ†ã‚¹ãƒˆå‡ºåŠ›ã‚’å‰Šé™¤

---

#### åŠ¹æœ

- âœ… ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆãŒæ­£å¸¸ã«å‹•ä½œï¼ˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ¶ˆå¤±ã‚’è§£æ±ºï¼‰
- âœ… é€Ÿåº¦SliderãŒä¸¡ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼ˆNormalMode: speedMultiplierã€WaveMode: waveSpeedï¼‰
- âœ… WaveModeã§é€Ÿåº¦ã¨æºã‚Œå¼·åº¦ã‚’ç‹¬ç«‹åˆ¶å¾¡å¯èƒ½
- âœ… å…¨UIå®Ÿè£…å®Œäº†ï¼ˆToggle 2å€‹ã€Slider 8å€‹ï¼‰
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´å¯èƒ½

---

## ğŸ“… 2026-01-21

### Phase 19: ãƒ“ãƒ«ãƒ‰ç”¨UIåˆ¶å¾¡é–¢æ•°ã®å®Ÿè£…ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ UIã‹ã‚‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã€UnityEventç”¨ã®publicé–¢æ•°ã‚’å®Ÿè£…

#### å®Ÿè£…å†…å®¹

**1. RiverFlowSimulation: UIåˆ¶å¾¡é–¢æ•°ï¼ˆ8å€‹ï¼‰**

| # | é–¢æ•°å | å‹ | ç”¨é€” |
|---|--------|----|----|
| 1 | SetWaveMode(bool) | Toggle | WaveMode ON/OFFåˆ‡ã‚Šæ›¿ãˆ |
| 2 | SetRandomizeWaveWidth(bool) | Toggle | æ³¢ã®å¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ– |
| 3 | SetSpeedMultiplier(float) | Slider | é€Ÿåº¦å€ç‡ï¼ˆNormalModeï¼‰ |
| 4 | SetWaveInterval(float) | Slider | å£ã®ç”Ÿæˆé–“éš” |
| 5 | SetWaveSpeed(float) | Slider | å£ã®ç§»å‹•é€Ÿåº¦ |
| 6 | SetWaveUndulationStrength(float) | Slider | æ³¢ã®æºã‚Œå¼·åº¦ |
| 7 | SetWaveWidthMaxMultiplier(float) | Slider | æ³¢ã®å¹…æœ€å¤§å€ç‡ |
| 8 | ~~SetRandomizeTopSpeed~~ | ~~Toggle~~ | å‰Šé™¤ |
| 9 | ~~SetRandomizeBottomSpeed~~ | ~~Toggle~~ | å‰Šé™¤ |

**2. RiverFlowVisualizer: RGBè‰²åˆ¶å¾¡é–¢æ•°ï¼ˆ3å€‹ï¼‰**

| # | é–¢æ•°å | å‹ | ç”¨é€” |
|---|--------|----|----|
| 1 | SetParticleColorR(float) | Slider | èµ¤æˆåˆ†ï¼ˆ0ï½1ï¼‰ |
| 2 | SetParticleColorG(float) | Slider | ç·‘æˆåˆ†ï¼ˆ0ï½1ï¼‰ |
| 3 | SetParticleColorB(float) | Slider | é’æˆåˆ†ï¼ˆ0ï½1ï¼‰ |

**3. é€Ÿåº¦ãƒ©ãƒ³ãƒ€ãƒ åŒ–æ©Ÿèƒ½ã®å‰Šé™¤**

ä»¥ä¸‹ã‚’å®Œå…¨å‰Šé™¤ï¼š
- `randomizeTopSpeed` / `randomizeBottomSpeed` (public bool)
- `waveSpeedMultipliers[]` / `waveBottomSpeedMultipliers[]` (privateé…åˆ—)
- äº¤å·®é˜²æ­¢ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆSpawnWaveå†…ã®é€Ÿåº¦æ¯”è¼ƒãƒ»æ±ºå®šå‡¦ç†ï¼‰
- Yåº§æ¨™ã«ã‚ˆã‚‹é€Ÿåº¦è£œé–“å‡¦ç†ï¼ˆUpdateParticlesWaveå†…ï¼‰
- é–¢é€£ã™ã‚‹OnValidateå‡¦ç†
- é–¢é€£ã™ã‚‹UIåˆ¶å¾¡é–¢æ•°ï¼ˆ2å€‹ï¼‰

**ç†ç”±**:
- äº¤å·®é˜²æ­¢ãƒ­ã‚¸ãƒƒã‚¯ã§é€Ÿåº¦ãŒ0.8å€ã«åæŸã™ã‚‹å•é¡Œ
- ä¸Šä¸‹ãŒåŒã˜é€Ÿåº¦ã«ãªã‚Šã€ãƒ©ãƒ³ãƒ€ãƒ æ€§ãŒå¤±ã‚ã‚Œã‚‹å•é¡Œ
- å®Ÿè£…ã®è¤‡é›‘ã•ã«å¯¾ã—ã¦åŠ¹æœãŒä¸æ˜ç­

**4. ã‚³ãƒ¼ãƒ‰ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**
- ä¸è¦ãªå¤‰æ•°ãƒ»é…åˆ—ã®å‰Šé™¤
- UpdateParticlesWave()ã®ç°¡ç•¥åŒ–ï¼ˆä¸€å¾‹waveSpeedã§ç§»å‹•ï¼‰
- ReinitializeRandomMultipliers()ã®ç°¡ç•¥åŒ–ï¼ˆå¹…å€ç‡ã®ã¿ï¼‰

#### UnityEventã§ã®æ¥ç¶šæ–¹æ³•

**Toggleï¼ˆOnValueChanged - Dynamic boolï¼‰**:
```
Toggle â†’ OnValueChanged(Boolean)
  â””â”€ Dynamic bool â†’ SetWaveMode / SetRandomizeWaveWidth
```

**Sliderï¼ˆOnValueChanged - Dynamic floatï¼‰**:
```
Slider â†’ OnValueChanged(Single)
  â””â”€ Dynamic float â†’ SetSpeedMultiplier / SetWaveInterval / etc.
```

**RGB Slider**:
```
Red Slider   (0ï½1, åˆæœŸå€¤1) â†’ SetParticleColorR
Green Slider (0ï½1, åˆæœŸå€¤1) â†’ SetParticleColorG
Blue Slider  (0ï½1, åˆæœŸå€¤1) â†’ SetParticleColorB
```

#### åŠ¹æœ
- âœ… ãƒ“ãƒ«ãƒ‰å¾Œã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´å¯èƒ½
- âœ… Toggle/Sliderã§ç›´æ„Ÿçš„ã«æ“ä½œ
- âœ… å³åº§ã«åæ˜ ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ èª¿æ•´ï¼‰
- âœ… ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã§ä¿å®ˆã—ã‚„ã™ã„
- âœ… RGBè‰²åˆ¶å¾¡ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®è‰²ã‚’è‡ªç”±ã«å¤‰æ›´å¯èƒ½

#### å‰Šé™¤ã«ã‚ˆã‚‹åŠ¹æœ
- âœ… ã‚³ãƒ¼ãƒ‰ãŒå¤§å¹…ã«ç°¡ç•¥åŒ–
- âœ… å‹•ä½œã—ãªã„æ©Ÿèƒ½ã‚’å‰Šé™¤ã—ã€ä¿å®ˆæ€§å‘ä¸Š
- âœ… ä¸è¦ãªé…åˆ—ãƒ»å¤‰æ•°ã®å‰Šé™¤ã§ãƒ¡ãƒ¢ãƒªå‰Šæ¸›

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã7ï¼‰

### Phase 18: æ¨ªå¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ–ä¸Šé™å€¤ã®Inspectoråˆ¶å¾¡ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
æ¨ªå¹…ã®ãƒ©ãƒ³ãƒ€ãƒ åŒ–ç¯„å›²ã‚’å›ºå®šå€¤ï¼ˆ0.5ï½2.0å€ï¼‰ã‹ã‚‰ã€Inspectorä¸Šã§ä¸Šé™å€¤ã‚’èª¿æ•´å¯èƒ½ã«ã™ã‚‹

#### å®Ÿè£…å†…å®¹ï¼ˆRiverFlowSimulation.csï¼‰

**1. æ–°ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ ï¼ˆ58-60è¡Œï¼‰**:
```csharp
[Tooltip("æ³¢ã®å¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã®æœ€å¤§å€ç‡")]
[Min(0.5f)]
public float waveWidthMaxMultiplier = 2.0f;
```

**2. ãƒ©ãƒ³ãƒ€ãƒ åŒ–ãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£**:
- **å¤‰æ›´å‰**: `0.5f + Random() * 1.5f` ï¼ˆå›ºå®šã§0.5ï½2.0å€ï¼‰
- **å¤‰æ›´å¾Œ**: `0.5f + Random() * (waveWidthMaxMultiplier - 0.5f)` ï¼ˆ0.5ï½è¨­å®šå€¤å€ï¼‰
- é©ç”¨ç®‡æ‰€:
  - ReinitializeRandomMultipliers()ï¼ˆ164è¡Œï¼‰
  - InitializeWave()ï¼ˆ225è¡Œï¼‰

#### ä»•æ§˜
- **ä¸‹é™**: 0.5å€ï¼ˆå›ºå®šï¼‰
- **ä¸Šé™**: waveWidthMaxMultiplierï¼ˆInspectorä¸Šã§å¤‰æ›´å¯èƒ½ã€æœ€å°å€¤0.5ï¼‰
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**: 2.0å€ï¼ˆå¾“æ¥ã¨åŒã˜ï¼‰
- **å¯†åº¦**: æ¨ªå¹…ãŒå¤§ãããªã‚‹ã¨å¯†åº¦ã¯ä½ä¸‹ï¼ˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ã¯å›ºå®šã®ãŸã‚ï¼‰

#### ä½¿ç”¨ä¾‹
- `waveWidthMaxMultiplier = 1.0` â†’ 0.5ï½1.0å€ã§ãƒ©ãƒ³ãƒ€ãƒ åŒ–
- `waveWidthMaxMultiplier = 2.0` â†’ 0.5ï½2.0å€ã§ãƒ©ãƒ³ãƒ€ãƒ åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- `waveWidthMaxMultiplier = 3.0` â†’ 0.5ï½3.0å€ã§ãƒ©ãƒ³ãƒ€ãƒ åŒ–

#### åŠ¹æœ
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ±‚ã«å¿œã˜ã¦æ¨ªå¹…ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ç¯„å›²ã‚’æŸ”è»Ÿã«èª¿æ•´å¯èƒ½
- âœ… Inspectorä¸Šã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å¤‰æ›´ãƒ»ç¢ºèªå¯èƒ½ï¼ˆOnValidateå¯¾å¿œï¼‰
- âœ… ä¸‹é™0.5å€ã¯å›ºå®šã®ãŸã‚ã€æ¥µç«¯ã«ç´°ã„å£ã¯ç™ºç”Ÿã—ãªã„

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã6ï¼‰

### Phase 17ä¿®æ­£: å‹•çš„é€Ÿåº¦åˆ¶å¾¡ã«ã‚ˆã‚‹å®Œå…¨äº¤å·®é˜²æ­¢ï¼ˆå®Œäº† âœ…ï¼‰

#### Phase 17ã®å•é¡Œ
é™é †ã‚½ãƒ¼ãƒˆæ–¹å¼ã§ã¯ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿï¼š
1. **waveIdãƒ«ãƒ¼ãƒ—å•é¡Œ**: waveId=0ãŒå†ç™ºç”Ÿæ™‚ã«å†ã³æœ€é€Ÿã«ãªã‚Šã€å¾Œæ–¹ã®å£ã‚’è¿½ã„è¶Šã™
2. **å…¨ä½“çš„ãªé€Ÿåº¦ä¸Šæ˜‡**: ä¸Šä¸‹ä¸¡æ–¹ã‚’æœ€é€Ÿå€¤ã§ã‚½ãƒ¼ãƒˆã—ãŸãŸã‚ã€å…¨ä½“ãŒé€Ÿããªã‚Šã™ããŸ

#### è§£æ±ºç­–ï¼šå‹•çš„é€Ÿåº¦åˆ¶å¾¡
**å®Ÿè£…æ–¹é‡**:
1. **ãƒ©ãƒ³ãƒ€ãƒ åŒ–ç¯„å›²ã®ç¸®å°**: 0.5ï½2.0å€ â†’ 0.9ï½1.1å€ï¼ˆç¯„å›²0.2ï¼‰
2. **å‹•çš„é€Ÿåº¦æ±ºå®š**: å£ã®ç™ºç”Ÿæ™‚ã«ç”»é¢ä¸Šã®å…¨å£ã®é€Ÿåº¦ã‚’èª¿ã¹ã€æœ€ã‚‚é…ã„é€Ÿåº¦ã‚ˆã‚Šå¿…ãšé…ãã™ã‚‹

#### å®Ÿè£…å†…å®¹ï¼ˆRiverFlowSimulation.csï¼‰

**1. InitializeWave()ã®ä¿®æ­£ï¼ˆ264-276è¡Œï¼‰**:
- é™é †ã‚½ãƒ¼ãƒˆå‡¦ç†ã‚’å‰Šé™¤
- åˆæœŸå€¤1.0å€ã«çµ±ä¸€ï¼ˆå®Ÿéš›ã®é€Ÿåº¦ã¯SpawnWaveã§å‹•çš„æ±ºå®šï¼‰

**2. ReinitializeRandomMultipliers()ã®ä¿®æ­£ï¼ˆ164-169è¡Œï¼‰**:
- åŒæ§˜ã«é™é †ã‚½ãƒ¼ãƒˆå‡¦ç†ã‚’å‰Šé™¤
- é€Ÿåº¦å€ç‡ã‚’ãƒªã‚»ãƒƒãƒˆ

**3. SpawnWave()ã«å‹•çš„é€Ÿåº¦æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ ï¼ˆ291-340è¡Œï¼‰**:
```csharp
// ç”»é¢ä¸Šã«ã‚ã‚‹å…¨ã¦ã®å£ã®é€Ÿåº¦ã‚’èª¿ã¹ã€æœ€ã‚‚é…ã„é€Ÿåº¦ã‚’è¦‹ã¤ã‘ã‚‹
float minTopSpeed = 1.1f; // åˆæœŸå€¤ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ç¯„å›²ã®æœ€å¤§å€¤ï¼‰
float minBottomSpeed = 1.1f;

for (ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« in ç”»é¢ä¸Šã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«)
{
    if (topSpeed < minTopSpeed) minTopSpeed = topSpeed;
    if (bottomSpeed < minBottomSpeed) minBottomSpeed = bottomSpeed;
}

// æ–°ã—ã„å£ã®é€Ÿåº¦ã‚’æ±ºå®šï¼ˆç”»é¢ä¸Šã®æœ€ã‚‚é…ã„é€Ÿåº¦-0.02ã‚ˆã‚Šé…ãï¼‰
float randomTop = 0.9 + Random() * 0.2; // 0.9ï½1.1
newTopSpeed = Max(0.8, Min(minTopSpeed - 0.02, randomTop));

float randomBottom = 0.9 + Random() * 0.2; // 0.9ï½1.1
newBottomSpeed = Max(0.8, Min(minBottomSpeed - 0.02, randomBottom));
```

#### ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä»•çµ„ã¿
1. **æœ€åˆã®å£**: ç”»é¢ä¸Šã«å£ãŒãªã„ãŸã‚ã€ãƒ©ãƒ³ãƒ€ãƒ å€¤ï¼ˆ0.9ï½1.1ï¼‰ãŒãã®ã¾ã¾æ¡ç”¨
2. **2ç•ªç›®ã®å£**: 1ç•ªç›®ã®å£ã®é€Ÿåº¦ã‚’èª¿ã¹ã€ãã‚Œã‚ˆã‚Š0.02é…ã„é€Ÿåº¦ãŒä¸Šé™
3. **3ç•ªç›®ä»¥é™**: ç”»é¢ä¸Šã®å…¨å£ã®ä¸­ã§æœ€ã‚‚é…ã„é€Ÿåº¦ã‚ˆã‚Š0.02é…ã„é€Ÿåº¦ãŒä¸Šé™
4. **ä¸‹é™**: 0.8å€ã‚’ä¸‹å›ã‚‰ãªã„ã‚ˆã†ã«ã‚¯ãƒ©ãƒ³ãƒ—

#### åŠ¹æœ
- âœ… **å®Œå…¨äº¤å·®é˜²æ­¢**: æ–°ã—ã„å£ã¯ç”»é¢ä¸Šã®å…¨ã¦ã®å£ã‚ˆã‚Šå¿…ãšé…ã„
- âœ… **waveIdãƒ«ãƒ¼ãƒ—å¯¾å¿œ**: waveIdã«ä¾å­˜ã›ãšã€å®Ÿéš›ã®ç”»é¢ä¸Šã®çŠ¶æ…‹ã§åˆ¤æ–­
- âœ… **é©åº¦ãªãƒ©ãƒ³ãƒ€ãƒ æ€§**: 0.9ï½1.1ã®ç¯„å›²å†…ã§è‡ªç„¶ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **é€Ÿåº¦ã®å®‰å®šåŒ–**: å…¨ä½“çš„ãªé€Ÿåº¦ãŒé©åˆ‡ãªç¯„å›²ã«åã¾ã‚‹

#### ä»•æ§˜
- **ãƒ©ãƒ³ãƒ€ãƒ ç¯„å›²**: 0.9ï½1.1å€ï¼ˆÂ±10%ï¼‰
- **æ¸›é€Ÿã‚¹ãƒ†ãƒƒãƒ—**: å‰ã®å£ã‚ˆã‚Š0.02å€é…ã„
- **ä¸‹é™**: 0.8å€ï¼ˆã“ã‚Œä»¥ä¸Šé…ããªã‚‰ãªã„ï¼‰
- **åˆ¤å®šç¯„å›²**: Xåº§æ¨™-0.1ï½1.2ï¼ˆç”»é¢ä¸Šã®å£ã®ã¿ï¼‰

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã5ï¼‰

### Phase 17: æ³¢ã®äº¤å·®é˜²æ­¢æ©Ÿèƒ½ï¼ˆå®Œäº† âœ…ï¼‰

#### å•é¡Œ
Phase 16ã®ãƒ©ãƒ³ãƒ€ãƒ åŒ–å®Ÿè£…ã§ã¯ã€å„å£ã®é€Ÿåº¦ãŒç‹¬ç«‹ã—ã¦ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã•ã‚Œã¦ã„ãŸãŸã‚ï¼š
- å¾Œã‹ã‚‰ç™ºç”Ÿã—ãŸå£ï¼ˆé€Ÿã„ï¼‰ãŒå…ˆã«ç™ºç”Ÿã—ãŸå£ï¼ˆé…ã„ï¼‰ã‚’è¿½ã„è¶Šã™å¯èƒ½æ€§
- æ³¢ãŒäº¤å·®ã—ã¦ã—ã¾ã†ä¸è‡ªç„¶ãªæŒ™å‹•

#### è§£æ±ºç­–ï¼šé€Ÿåº¦ã®é™é †ã‚½ãƒ¼ãƒˆ
ç™ºç”Ÿé †åºã«åŸºã¥ã„ã¦é€Ÿåº¦ã‚’å‰²ã‚Šå½“ã¦ã€çµ¶å¯¾ã«äº¤å·®ã—ãªã„ä»•æ§˜ã«å¤‰æ›´

**å®Ÿè£…æ–¹é‡**:
1. ãƒ©ãƒ³ãƒ€ãƒ ãªé€Ÿåº¦å€¤ã‚’ç”Ÿæˆï¼ˆ0.5ï½2.0å€ï¼‰
2. é™é †ã«ã‚½ãƒ¼ãƒˆï¼ˆé€Ÿã„â†’é…ã„ï¼‰
3. waveIdé †ã«å‰²ã‚Šå½“ã¦
   - waveId=0ï¼ˆæœ€åˆã«ç™ºç”Ÿï¼‰: æœ€é€Ÿ
   - waveId=1ï¼ˆæ¬¡ã«ç™ºç”Ÿï¼‰: 2ç•ªç›®ã«é€Ÿã„
   - ...
   - waveId=maxWaves-1ï¼ˆæœ€å¾Œã«ç™ºç”Ÿï¼‰: æœ€é…

#### ä¿®æ­£ç®‡æ‰€ï¼ˆRiverFlowSimulation.csï¼‰

**1. InitializeWave()ã®é€Ÿåº¦åˆæœŸåŒ–éƒ¨åˆ†ï¼ˆ228-280è¡Œï¼‰**:
```csharp
// ä¸‹å´é€Ÿåº¦å€ç‡ï¼ˆäº¤å·®é˜²æ­¢ï¼šç™ºç”Ÿé †ã«é™é †ã‚½ãƒ¼ãƒˆï¼‰
if (randomizeBottomSpeed)
{
    float[] randomBottomSpeeds = new float[maxWaves];
    for (int i = 0; i < maxWaves; i++)
    {
        randomBottomSpeeds[i] = 0.5f + (float)rng.NextDouble() * 1.5f;
    }
    // é™é †ã«ã‚½ãƒ¼ãƒˆï¼ˆé€Ÿã„â†’é…ã„ï¼‰
    System.Array.Sort(randomBottomSpeeds);
    System.Array.Reverse(randomBottomSpeeds);
    // waveIdé †ã«å‰²ã‚Šå½“ã¦ï¼ˆwaveId=0ãŒæœ€é€Ÿã€å¾Œç™ºã»ã©é…ã„ï¼‰
    for (int waveId = 0; waveId < maxWaves; waveId++)
    {
        waveBottomSpeedMultipliers[waveId] = randomBottomSpeeds[waveId];
    }
}
```

**2. ReinitializeRandomMultipliers()ï¼ˆ164-208è¡Œï¼‰**:
- åŒæ§˜ã®é™é †ã‚½ãƒ¼ãƒˆå‡¦ç†ã‚’è¿½åŠ 
- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒˆã‚°ãƒ«æ™‚ã‚‚äº¤å·®é˜²æ­¢ãŒç¶­æŒã•ã‚Œã‚‹

#### åŠ¹æœ
- âœ… å…ˆã«ç™ºç”Ÿã—ãŸå£ãŒå¸¸ã«å‰æ–¹ã‚’ç¶­æŒ
- âœ… å¾Œã‹ã‚‰ç™ºç”Ÿã—ãŸå£ã¯å‰ã®å£ã‚’è¿½ã„è¶Šã•ãªã„
- âœ… æ³¢ã®äº¤å·®ãŒå®Œå…¨ã«é˜²æ­¢ã•ã‚Œã‚‹
- âœ… ãƒ©ãƒ³ãƒ€ãƒ æ€§ã‚’ä¿ã¡ãªãŒã‚‰è‡ªç„¶ãªæ³¢ã®æŒ™å‹•ã‚’å®Ÿç¾

#### ä»•æ§˜
- **ç™ºç”Ÿé †åº**: currentWaveIdãŒ0â†’1â†’2â†’...â†’maxWaves-1ã¨ãƒ«ãƒ¼ãƒ—
- **ç”»é¢ä¸Šã®ä½ç½®**: waveId=0ãŒæœ€ã‚‚å³ï¼ˆå…ˆé ­ï¼‰ã€waveId=maxWaves-1ãŒæœ€ã‚‚å·¦ï¼ˆå¾Œæ–¹ï¼‰
- **é€Ÿåº¦**: waveId=0ãŒæœ€é€Ÿã€waveId=maxWaves-1ãŒæœ€é…
- **çµæœ**: å¾Œæ–¹ã®å£ãŒå‰æ–¹ã®å£ã‚’è¿½ã„è¶Šã™ã“ã¨ã¯çµ¶å¯¾ã«ãªã„

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã4ï¼‰

### Phase 16: WaveModeæ³¢ã®ãƒ©ãƒ³ãƒ€ãƒ åŒ–æ©Ÿèƒ½ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
WaveModeã®å„å£ã«å€‹åˆ¥ã®ãƒ©ãƒ³ãƒ€ãƒ æ€§ã‚’ä»˜ä¸ã—ã€ã‚ˆã‚Šè‡ªç„¶ãªæ³¢ã®è¡¨ç¾ã‚’å®Ÿç¾

#### å®Ÿè£…å†…å®¹ï¼ˆRiverFlowSimulation.csï¼‰

**1. æ³¢ã®å¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ–**:
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `bool randomizeWaveWidth`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
- å„å£ã®å¹…: 0.5ï½2.0å€ï¼ˆæœ€å¤§å¹…0.1ï¼‰
- å†…éƒ¨é…åˆ—: `waveWidthMultipliers[]`ï¼ˆå£ã”ã¨ã®å¹…å€ç‡ï¼‰

**2. ä¸Šå´é€Ÿåº¦ãƒ©ãƒ³ãƒ€ãƒ åŒ–**:
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `bool randomizeTopSpeed`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
- ä¸Šå´é€Ÿåº¦: 0.5ï½2.0å€ï¼ˆOFFæ™‚: 1.0å€ï¼‰
- å†…éƒ¨é…åˆ—: `waveSpeedMultipliers[]`ï¼ˆå£ã”ã¨ã®ä¸Šå´é€Ÿåº¦å€ç‡ï¼‰

**3. ä¸‹å´é€Ÿåº¦ãƒ©ãƒ³ãƒ€ãƒ åŒ–**:
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `bool randomizeBottomSpeed`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
- ä¸‹å´é€Ÿåº¦: 0.5ï½2.0å€ï¼ˆOFFæ™‚: 1.0å€ï¼‰
- å†…éƒ¨é…åˆ—: `waveBottomSpeedMultipliers[]`ï¼ˆå£ã”ã¨ã®ä¸‹å´é€Ÿåº¦å€ç‡ï¼‰

**4. Pythonå®Ÿè£…ã®å†ç¾ï¼ˆYåº§æ¨™ãƒ™ãƒ¼ã‚¹é€Ÿåº¦ï¼‰**:
- å…ƒã®Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ä¸Šå´ãŒé€Ÿãã€ä¸‹å´ãŒé…ã„ç‰¹æ€§
- Yåº§æ¨™ã«åŸºã¥ãé€Ÿåº¦å‹¾é…: `Mathf.Lerp(bottomSpeed, topSpeed, p.position.y)`
- ä¸‹å´ï¼ˆy=0ï¼‰ã‹ã‚‰ä¸Šå´ï¼ˆy=1ï¼‰ã¸æ»‘ã‚‰ã‹ã«é€Ÿåº¦å¤‰åŒ–

**5. ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒˆã‚°ãƒ«æ©Ÿèƒ½**:
- `OnValidate()`ã§å„Boolã®å¤‰æ›´ã‚’ç›£è¦–
- `ReinitializeRandomMultipliers()`ã§å³åº§ã«å†åˆæœŸåŒ–
- å®Ÿè¡Œä¸­ã®Inspectorå¤‰æ›´ã«å¯¾å¿œ

#### è©¦è¡ŒéŒ¯èª¤ã®çµŒç·¯

1. **å¹…ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã®èª¤è§£**: æœ€åˆYåº§æ¨™ï¼ˆç¸¦æŒ¯å¹…ï¼‰ã«é©ç”¨ â†’ Xåº§æ¨™ï¼ˆæ¨ªå¹…ï¼‰ã«ä¿®æ­£
2. **ä¸Šå´é€Ÿåº¦ã®å•é¡Œ**: ä½ç½®ã‚’ãšã‚‰ã™æ–¹æ³•ã‚’è©¦ã™ â†’ é€Ÿåº¦å€ç‡ã«å¤‰æ›´
3. **å›ºå®šä¸Šä¸‹é–¢ä¿‚**: å¿…ãšä¸ŠãŒé€Ÿã„è¨­è¨ˆ â†’ ç‹¬ç«‹ã—ãŸãƒ©ãƒ³ãƒ€ãƒ å€¤ã«å¤‰æ›´ï¼ˆä¸¡æ–¹0.5ï½2.0ï¼‰
4. **ä¸Šå´OFFæ™‚ã®é€Ÿåº¦**: 2.0å€ â†’ 1.0å€ï¼ˆé€šå¸¸ï¼‰ã«ä¿®æ­£
5. **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ éå¯¾å¿œ**: Boolå¤‰æ›´ãŒå³åº§ã«åæ˜ ã•ã‚Œãªã„ â†’ OnValidate()ç›£è¦–è¿½åŠ 

#### æœ€çµ‚å®Ÿè£…ã®ã‚³ãƒ¼ãƒ‰ï¼ˆUpdateParticlesWaveéƒ¨åˆ†ï¼‰

```csharp
// æ³¢ã”ã¨ã®ä¸‹å´ãƒ»ä¸Šå´é€Ÿåº¦å€ç‡å–å¾—ï¼ˆå„0.5ï½2.0ã§ãƒ©ãƒ³ãƒ€ãƒ ï¼‰
float bottomSpeed = (waveBottomSpeedMultipliers != null) ? waveBottomSpeedMultipliers[p.waveId] : 1.0f;
float topSpeed = (waveSpeedMultipliers != null) ? waveSpeedMultipliers[p.waveId] : 1.0f;

// Yåº§æ¨™ã«å¿œã˜ã¦ç·šå½¢è£œé–“ï¼ˆä¸‹å´ã‹ã‚‰ä¸Šå´ã¸ï¼‰
float finalSpeedMultiplier = Mathf.Lerp(bottomSpeed, topSpeed, p.position.y);

// Xæ–¹å‘: ä¸€å¾‹waveSpeed + VectorFieldã®å½±éŸ¿ã‚’æºã‚Œå¼·åº¦ã§åˆ¶å¾¡ï¼ˆæœ€çµ‚é€Ÿåº¦å€ç‡ã‚’é©ç”¨ï¼‰
p.position.x += waveSpeed * Time.deltaTime * finalSpeedMultiplier + velocity.x * dt * speedMultiplier * waveUndulationStrength * finalSpeedMultiplier;

// Yæ–¹å‘: VectorFieldã®å½±éŸ¿ã‚’æºã‚Œå¼·åº¦ã§åˆ¶å¾¡ï¼ˆæœ€çµ‚é€Ÿåº¦å€ç‡ã‚’é©ç”¨ï¼‰
p.position.y += velocity.y * dt * speedMultiplier * waveUndulationStrength * finalSpeedMultiplier;
```

#### ç‰¹å¾´
- **3ç¨®é¡ã®Boolç‹¬ç«‹åˆ¶å¾¡**: å¹…ãƒ»ä¸Šå´é€Ÿåº¦ãƒ»ä¸‹å´é€Ÿåº¦ã‚’å€‹åˆ¥ã«ON/OFFå¯èƒ½
- **å£ã”ã¨ã®ãƒ©ãƒ³ãƒ€ãƒ æ€§**: å…¨ã¦ã®å£ãŒç•°ãªã‚‹å¹…ãƒ»é€Ÿåº¦ã‚’æŒã¤
- **Pythonå®Ÿè£…ã®å†ç¾**: ä¸Šå´ãŒé€Ÿãä¸‹å´ãŒé…ã„è‡ªç„¶ãªæ³¢ã®ç‰¹æ€§
- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å¯¾å¿œ**: å®Ÿè¡Œä¸­ã®Inspectorå¤‰æ›´ãŒå³åº§ã«åæ˜ 
- **è‡ªç„¶ãªãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³**: åŒã˜å¹…ãƒ»é€Ÿåº¦ã®ãƒ©ãƒ³ãƒ€ãƒ ç¯„å›²ï¼ˆ0.5ï½2.0ï¼‰ã§çµ±ä¸€

#### æˆæœ
- âœ… å„å£ã®å¹…ãƒ»é€Ÿåº¦ãŒå€‹åˆ¥ã«ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã•ã‚Œã€ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³è±Šã‹ãªæ³¢ã‚’å®Ÿç¾
- âœ… Pythonå®Ÿè£…ã®ã€Œä¸Šå´é€Ÿåº¦ã€ç‰¹æ€§ã‚’å†ç¾
- âœ… Inspectorä¸Šã§3ç¨®é¡ã®ãƒ©ãƒ³ãƒ€ãƒ åŒ–ã‚’ç‹¬ç«‹ã—ã¦åˆ¶å¾¡å¯èƒ½
- âœ… å®Ÿè¡Œä¸­ã®Boolå¤‰æ›´ãŒå³åº§ã«åæ˜ ã•ã‚Œã‚‹

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã3ï¼‰

### Phase 15: é»„é‡‘æ¯”ã«ã‚ˆã‚‹ä½ç›¸ãšã‚‰ã—ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
å„å£ï¼ˆwaveIdï¼‰ã”ã¨ã«ç•°ãªã‚‹æºã‚Œãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿç¾ï¼ˆè‡ªç„¶ãªæ³¢ã€ãã«ã‚ƒãã«ã‚ƒã—ãªã„ï¼‰

#### å®Ÿè£…å†…å®¹ï¼ˆRiverFlowSimulation.cs:305-312ï¼‰

```csharp
// é»„é‡‘æ¯”ã«ã‚ˆã‚‹æ™‚é–“ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆå£ã”ã¨ã«ç•°ãªã‚‹ä½ç›¸ï¼‰
float timeOffset = p.waveId * 0.618f;

// é»„é‡‘æ¯”ã®è£œæ•°ã«ã‚ˆã‚‹ç©ºé–“ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆå£ã”ã¨ã«ç•°ãªã‚‹é–‹å§‹ä½ç½®ï¼‰
float spaceOffset = p.waveId * 0.382f;

// ãƒ™ã‚¯ãƒˆãƒ«å ´ã‹ã‚‰é€Ÿåº¦å–å¾—ï¼ˆXåº§æ¨™ã«ã‚ªãƒ•ã‚»ãƒƒãƒˆã§å„å£ãŒç•°ãªã‚‹æ³¢å½¢é–‹å§‹ä½ç½®ã‹ã‚‰è›‡è¡Œï¼‰
Vector2 velocity = vectorField.GetVelocity(p.position.x + spaceOffset, p.position.y, time + timeOffset);
```

#### è©¦è¡ŒéŒ¯èª¤ã®çµŒç·¯
1. **åˆå›å®Ÿè£…**: æ™‚é–“ã‚ªãƒ•ã‚»ãƒƒãƒˆã®ã¿ â†’ åŒã˜ä½ç½®ã§ç•°ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ï¼‰
2. **ä¿®æ­£1**: Yåº§æ¨™ã«ç©ºé–“ã‚ªãƒ•ã‚»ãƒƒãƒˆè¿½åŠ  â†’ è¤‡é›‘ãªæ­ªã¿ï¼ˆãã«ã‚ƒãã«ã‚ƒã€4ã‚«ãƒ¼ãƒ–ç­‰ï¼‰
3. **ä¿®æ­£2**: 2.0å€å¢—å¹…è¿½åŠ  â†’ æºã‚ŒãŒå¤§ãã™ãã‚‹
4. **æœ€çµ‚ç‰ˆ**: Xåº§æ¨™ã«ç©ºé–“ã‚ªãƒ•ã‚»ãƒƒãƒˆã€å¢—å¹…ãªã— â†’ **è‡ªç„¶ãªæ³¢ã‚’å®Ÿç¾**

#### æœ€çµ‚å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ
- **æ™‚é–“ã‚ªãƒ•ã‚»ãƒƒãƒˆ**: `time + waveId Ã— 0.618` - ç•°ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- **Xç©ºé–“ã‚ªãƒ•ã‚»ãƒƒãƒˆ**: `p.position.x + waveId Ã— 0.382` - ç•°ãªã‚‹æ³¢å½¢é–‹å§‹ä½ç½®
- **Yåº§æ¨™ã¯ãã®ã¾ã¾**: è¤‡é›‘ãªæ­ªã¿ã‚’é˜²ãï¼ˆè‡ªç„¶ãªæ³¢ï¼‰
- **å¢—å¹…ãªã—**: VectorFieldåŠ¹æœ1.0å€ï¼ˆå¤§ããªæ»‘ã‚‰ã‹ãªSå­—ã‚«ãƒ¼ãƒ–ï¼‰

#### åŠ¹æœ
- å„å£ã¯å¤§ããªæ»‘ã‚‰ã‹ãªSå­—ã‚«ãƒ¼ãƒ–ã‚’ç¶­æŒï¼ˆ1ã¤ã®æ³¢ã§1ã¤ã®ã‚«ãƒ¼ãƒ–ï¼‰
- ç•°ãªã‚‹Xä½ç½®ã‹ã‚‰æ³¢å½¢ã‚’é–‹å§‹ï¼ˆwaveIdã”ã¨ã«ç•°ãªã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- ç•°ãªã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è›‡è¡Œï¼ˆé»„é‡‘æ¯”ã«ã‚ˆã‚‹æ™‚é–“ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼‰
- ç¾å®Ÿã®æ³¢ã®ã‚ˆã†ãªè‡ªç„¶ãªå‹•ã

#### æˆ»ã™æ–¹æ³•
```bash
# ç¾åœ¨ã®ã‚³ãƒŸãƒƒãƒˆ: 01ce05c
git reset --hard 01ce05c
git push --force
```

---

## ğŸ“… 2026-01-16ï¼ˆç¶šã2ï¼‰

### Phase 14: WaveModeæ³¢ã®æºã‚Œå¼·åº¦ã‚’é€£ç¶šå€¤ã§åˆ¶å¾¡

#### è¦ä»¶
- ç¾åœ¨ã®bool waveUndulationã‚’å»ƒæ­¢
- floatå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ0.0ï½1.0ï¼‰ã§æºã‚Œå¼·åº¦ã‚’åˆ¶å¾¡
  - 0.0 = å®Œå…¨ãªå£çŠ¶æ…‹ï¼ˆæºã‚Œãªã—ï¼‰
  - 1.0 = NormalModeã®é–‹å§‹æ™‚ã®æ³¢ã®æºã‚Œå…·åˆ
- Inspectorä¸Šã§ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆRangeï¼‰ã§æ“ä½œå¯èƒ½

#### ä½œæ¥­å†…å®¹
- [x] RiverFlowSimulation.csç¢ºèªï¼ˆç¾åœ¨ã®waveUndulationå®Ÿè£…ï¼‰
- [x] bool waveUndulation â†’ float waveUndulationStrengthã«å¤‰æ›´
- [x] UpdateParticlesWaveå‡¦ç†ã‚’ä¿®æ­£ï¼ˆ0-1ã§æºã‚Œå¼·åº¦åˆ¶å¾¡ï¼‰

#### å®Ÿè£…å†…å®¹

**1. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ï¼ˆRiverFlowSimulation.cs:51-53ï¼‰**:
- `bool waveUndulation` â†’ `float waveUndulationStrength`
- `[Range(0f, 1f)]`ã§ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åŒ–
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤: 0.0ï¼ˆå£çŠ¶æ…‹ï¼‰

**2. å‡¦ç†çµ±åˆï¼ˆRiverFlowSimulation.cs:290-336ï¼‰**:
- `UpdateParticlesWaveFlat()`ã¨`UpdateParticlesWaveWithUndulation()`ã‚’çµ±åˆ
- `UpdateParticlesWave()`ã§æºã‚Œå¼·åº¦ã‚’é€£ç¶šå€¤ã§åˆ¶å¾¡
- VectorFieldåŠ¹æœã«`waveUndulationStrength`ã‚’ä¹—ç®—

**3. æºã‚Œå¼·åº¦ã®å®šç¾©**:
- **0.0**: å®Œå…¨ãªå£çŠ¶æ…‹ï¼ˆVectorFieldåŠ¹æœãªã—ï¼‰
- **1.0**: NormalModeç›¸å½“ã®æºã‚Œï¼ˆVectorFieldåŠ¹æœ100%ï¼‰
- **0.0ï½1.0**: ä¸­é–“ã®æºã‚Œå…·åˆã‚’é€£ç¶šçš„ã«åˆ¶å¾¡

**æˆæœ**: Inspectorä¸Šã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å£ã‹ã‚‰æ³¢ã¾ã§é€£ç¶šçš„ã«åˆ¶å¾¡å¯èƒ½ã«

---

## ğŸ“… 2026-01-16ï¼ˆç¶šãï¼‰

### Phase 13: IndexOutOfRangeExceptionãƒã‚°ä¿®æ­£

#### å•é¡Œ
- `RiverFlowVisualizer.cs:113`ã§IndexOutOfRangeExceptionç™ºç”Ÿ
- particlesPerWaveã®å€¤ãŒç‰¹å®šã®å€¤ã‚’è¶…ãˆã‚‹ã¨ã‚¨ãƒ©ãƒ¼
- é…åˆ—ã®ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ãŒåŸå› 

#### èª¿æŸ»å†…å®¹
- [x] RiverFlowVisualizer.cs:113å‘¨è¾ºã®ã‚³ãƒ¼ãƒ‰ç¢ºèª
- [x] é…åˆ—ã®ã‚µã‚¤ã‚ºã¨ä½¿ç”¨ç¯„å›²ã‚’èª¿æŸ»
- [x] åŸå› ç‰¹å®šã¨ä¿®æ­£æ–¹é‡æ±ºå®š

#### åŸå› ç‰¹å®š
- **renderParticlesé…åˆ—**: 50,000å€‹ï¼ˆå›ºå®šã‚µã‚¤ã‚ºï¼‰
- **WaveModeãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°**: `maxWaves Ã— particlesPerWave`
  - æœ€å¤§: 20 Ã— 10,000 = **200,000å€‹**
- `particlesPerWave Ã— maxWaves`ãŒ50,000ã‚’è¶…ãˆã‚‹ã¨é…åˆ—ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ç™ºç”Ÿ

#### ä¿®æ­£å†…å®¹
1. **é…åˆ—ã‚µã‚¤ã‚ºæ‹¡å¼µ**: 50,000 â†’ 200,000å€‹ï¼ˆRiverFlowVisualizer.cs:71ï¼‰
2. **maxParticlesæ‹¡å¼µ**: 50,000 â†’ 200,000å€‹ï¼ˆRiverFlowVisualizer.cs:49ï¼‰
3. **å‹•çš„ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯**: LateUpdate()ã§é…åˆ—ã‚µã‚¤ã‚ºä¸è¶³æ™‚ã«è‡ªå‹•æ‹¡å¼µï¼ˆRiverFlowVisualizer.cs:102-107ï¼‰

**æˆæœ**: particlesPerWaveã®å€¤ã«é–¢ã‚ã‚‰ãšã€IndexOutOfRangeExceptionç™ºç”Ÿã‚’é˜²æ­¢

---

## ğŸ“… 2026-01-16

### Phase 12: Gitãƒªãƒã‚¸ãƒˆãƒªè¨­å®šãƒ»åˆå›ãƒ—ãƒƒã‚·ãƒ¥

#### ç›®çš„
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’GitHubãƒªãƒã‚¸ãƒˆãƒªã«ä¿å­˜ã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’é–‹å§‹

#### ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±
- **ãƒªãƒã‚¸ãƒˆãƒªURL**: https://github.com/nakagimadevelop002-glitch/RiverProjectionMapping.git
- **ãƒ–ãƒ©ãƒ³ãƒ**: main

#### ä½œæ¥­å†…å®¹
- [x] Gitãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ–
- [x] .gitignoreä½œæˆï¼ˆUnityç”¨ï¼‰
- [x] ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªè¨­å®š
- [x] åˆå›ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥

#### å®Ÿæ–½è©³ç´°
1. Gitãƒªãƒã‚¸ãƒˆãƒªåˆæœŸåŒ– (`git init`)
2. Unityç”¨.gitignoreä½œæˆ
3. ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªè¨­å®š (`git remote add origin`)
4. å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒ»ã‚³ãƒŸãƒƒãƒˆï¼ˆ506ãƒ•ã‚¡ã‚¤ãƒ«ã€139,205è¡Œï¼‰
5. ãƒªãƒ¢ãƒ¼ãƒˆã¨ã®ãƒãƒ¼ã‚¸ï¼ˆ.gitignoreã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºï¼‰
6. mainãƒ–ãƒ©ãƒ³ãƒã¸ãƒ—ãƒƒã‚·ãƒ¥å®Œäº†

**æˆæœ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ãŒGitHubä¸Šã§ç®¡ç†å¯èƒ½ã«

---

## ğŸ“… 2026-01-13ï¼ˆç¶šã3ï¼‰

### Phase 11: WaveModeæ³¢ã®æºã‚‰ãæ©Ÿèƒ½å®Ÿè£…ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
WaveModeå†…ã§ã€Œå£ã€ã¨ã€Œæºã‚‰ãæ³¢ã€ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…

#### å®Ÿè£…å†…å®¹

**1. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ **:
- `bool waveUndulation`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
- false: å£ã¨ã—ã¦ç§»å‹•ï¼ˆæºã‚‰ããªã—ï¼‰
- true: VectorFieldã«ã‚ˆã‚‹é©åº¦ãªæ³¢ã®æºã‚‰ã

**2. å‡¦ç†åˆ†å²å®Ÿè£…**:
- `UpdateParticlesWave()`: waveUndulationã§åˆ†å²
- `UpdateParticlesWaveFlat()`: æºã‚‰ããªã—ï¼ˆä¸€å¾‹å³ç§»å‹•ï¼‰
- `UpdateParticlesWaveWithUndulation()`: æºã‚‰ãã‚ã‚Šï¼ˆVectorFieldä½¿ç”¨ï¼‰

**3. æºã‚‰ãã‚ã‚Šã®æœ€çµ‚å®Ÿè£…**:
```csharp
// Xæ–¹å‘: ä¸€å¾‹waveSpeed + VectorFieldã®å½±éŸ¿20%
p.position.x += waveSpeed * Time.deltaTime + velocity.x * dt * speedMultiplier * 0.2f;

// Yæ–¹å‘: VectorFieldã®å½±éŸ¿30%
p.position.y += velocity.y * dt * speedMultiplier * 0.3f;
```

#### è©¦è¡ŒéŒ¯èª¤ã®çµŒç·¯
1. **ç¬¬1æ¡ˆ**: VectorFieldã‚’ãã®ã¾ã¾ä½¿ç”¨ â†’ ä¸­å¤®ãŒæ­ªã¿ã™ãã€ä¸Šä¸‹ãŒé…ã™ã
2. **ç¬¬2æ¡ˆ**: sinæ³¢ã«ã‚ˆã‚‹æºã‚‰ã â†’ æŒ¯å¹…ãŒå°ã•ã™ãã¦å£ã¨å¤‰ã‚ã‚‰ãªã„
3. **ç¬¬3æ¡ˆ**: VectorFieldåŠ¹æœé‡0.5å€ â†’ é€Ÿåº¦ã‚‚åŠæ¸›ã—ã¦ã—ã¾ã†
4. **ç¬¬4æ¡ˆ**: Xæ–¹å‘2å€ã€Yæ–¹å‘0.5å€ â†’ ä¸­å¤®ã ã‘æ¥µç«¯ã«å³ã«æ­ªã‚€ï¼ˆVectorFieldã®ä¸­å¤®åŠ é€ŸãŒåŸå› ï¼‰
5. **ç¬¬5æ¡ˆ**: Xæ–¹å‘ã‚’waveSpeedã®ã¿ â†’ æºã‚‰ããŒå…¨ããªãå£ã¨åŒã˜
6. **æœ€çµ‚æ¡ˆ**: Xæ–¹å‘ã«waveSpeed + VectorField 20%ã€Yæ–¹å‘30% â†’ **é©åº¦ãªæºã‚‰ãã‚’å®Ÿç¾**

#### é‡è¦ãªç™ºè¦‹
- VectorFieldã¯ä¸­å¤®éƒ¨åˆ†ï¼ˆy=0.5ä»˜è¿‘ï¼‰ã§Xæ–¹å‘é€Ÿåº¦ãŒæœ€å¤§3.6å€ã«ãªã‚‹è¨­è¨ˆ
- ãã®ã¾ã¾VectorFieldã‚’ä½¿ã†ã¨ä¸­å¤®ã ã‘æ¥µç«¯ã«é€Ÿããªã‚‹
- ä¸€å¾‹é€Ÿåº¦ï¼ˆwaveSpeedï¼‰ + VectorFieldã®å½±éŸ¿ã‚’æ§ãˆã‚ã«åŠ ãˆã‚‹æ–¹å¼ãŒæœ€é©

#### ç‰¹å¾´
- **WaveModeå†…ã®ã¿ã§åˆ‡ã‚Šæ›¿ãˆ**: NormalModeã«ã¯å½±éŸ¿ãªã—
- **Inspectorä¸Šã§åˆ‡ã‚Šæ›¿ãˆå¯èƒ½**: waveUndulationãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹
- **å£ãŒå°‘ã—æ³¢ã®ã‚ˆã†ã«å´©ã‚Œã‚‹ç¨‹åº¦**: é©åº¦ãªæºã‚‰ãã‚’å®Ÿç¾

---

## ğŸ“… 2026-01-13ï¼ˆç¶šã2ï¼‰

### Phase 10: ParticleSystemæœ€å¤§æ•°å•é¡Œã®è§£æ±º

#### å•é¡Œç™ºè¦š
- maxWaves=10, particlesPerWave=4000ï¼ˆåˆè¨ˆ40000å€‹ï¼‰ã®è¨­å®šã§å£ãŒ4æœ¬ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„
- åŸå› : `RiverFlowVisualizer`ã®ParticleSystemæœ€å¤§æ•°ãŒ14000å€‹ã«åˆ¶é™ã•ã‚Œã¦ã„ãŸ
- é…åˆ—ã®æœ€åˆã®14000å€‹ï¼ˆID0-3ï¼‰ã®ã¿è¡¨ç¤ºã€ID4ä»¥é™ã¯è¡¨ç¤ºã•ã‚Œãªã„

#### è§£æ±ºç­–
- `InitializeParticleSystem()`: maxParticles = 50000ã«æ‹¡å¼µ
- `renderParticles`é…åˆ—: 50000è¦ç´ ç¢ºä¿
- ã“ã‚Œã«ã‚ˆã‚ŠWaveModeã§å¤§é‡ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸ

#### é‡å¤§ãªå¤±æ…‹ï¼ˆ2026-01-13ï¼‰

**å•é¡Œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€ŒWaveModeã®æ™‚ã¯å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¡¨ç¤ºã€ã¨æŒ‡ç¤ºã—ãŸã«ã‚‚é–¢ã‚ã‚‰ãšã€NormalModeã®æŒ™å‹•ã‚‚å¤‰æ›´ã—ã¦ã—ã¾ã£ãŸ

**å¤±æ…‹ã®è©³ç´°**:
1. displayCountã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å¤‰æ›´
2. InitializeParticleSystem()ã§ãƒ¢ãƒ¼ãƒ‰åˆ†å²ã‚’å°å…¥
3. NormalModeã§ã‚‚simulation.modeã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦NullReferenceExceptionç™ºç”Ÿ
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€ŒæŒ‡ç¤ºã‚’èã‘ã€ã€Œå‹æ‰‹ã«å‹•ããªã€ã¨ã„ã†è­¦å‘Šã‚’ç„¡è¦–ã—ã¦ä½œæ¥­ç¶™ç¶š

**æ ¹æœ¬åŸå› **:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºã«å«ã¾ã‚Œã‚‹**æ¡ä»¶**ï¼ˆã€Œã€‡ã€‡ã®æ™‚ã¯ã€ï¼‰ã‚’ç„¡è¦–
- æŒ‡ç¤ºã•ã‚Œã¦ã„ãªã„éƒ¨åˆ†ã¾ã§å‹æ‰‹ã«å¤‰æ›´
- ä½œæ¥­å‰ã®ç¢ºèªã‚’æ€ ã£ãŸ

---

## âš ï¸ æ•™è¨“è¿½åŠ ï¼ˆ2026-01-13ï¼‰

### 8. ãƒ¢ãƒ¼ãƒ‰åˆ¥å‡¦ç†å¤‰æ›´æ™‚ã®çµ¶å¯¾åŸå‰‡

**[ABSOLUTE REQUIREMENT]** ã€Œã€‡ã€‡ãƒ¢ãƒ¼ãƒ‰ã®æ™‚ã¯ã€ã¨ã„ã†æ¡ä»¶ä»˜ãæŒ‡ç¤ºã®å ´åˆã€ä»–ã®ãƒ¢ãƒ¼ãƒ‰ã«ã¯ä¸€åˆ‡å½±éŸ¿ã‚’ä¸ãˆãªã„ã“ã¨

#### å¿…é ˆç¢ºèªäº‹é …:
1. **[MANDATORY]** ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºã«æ¡ä»¶ï¼ˆã€Œã€‡ã€‡ã®æ™‚ã¯ã€ã€Œã€‡ã€‡ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ï¼‰ãŒå«ã¾ã‚Œã‚‹å ´åˆã€ãã®æ¡ä»¶**ã®ã¿**ã‚’å¤‰æ›´å¯¾è±¡ã¨ã™ã‚‹
2. **[MANDATORY]** æ¡ä»¶åˆ†å²ã‚’ä½¿ç”¨ã—ã¦ã€æŒ‡å®šã•ã‚ŒãŸãƒ¢ãƒ¼ãƒ‰ä»¥å¤–ã¯**å…ƒã®æŒ™å‹•ã‚’ç¶­æŒ**ã™ã‚‹
3. **[MANDATORY]** ä½œæ¥­å‰ã«ã€Œã€‡ã€‡ãƒ¢ãƒ¼ãƒ‰ã®ã¿å¤‰æ›´ã€ä»–ã®ãƒ¢ãƒ¼ãƒ‰ã¯å¤‰æ›´ã—ãªã„ã€ã“ã¨ã‚’ç¢ºèªã™ã‚‹
4. **[ABSOLUTE PROHIBITION]** ã€Œã¤ã„ã§ã«ã€ã€Œã¾ã¨ã‚ã¦ã€ä»–ã®ãƒ¢ãƒ¼ãƒ‰ã‚‚å¤‰æ›´ã™ã‚‹ã“ã¨ã¯çµ¶å¯¾ç¦æ­¢

#### æ­£ã—ã„å®Ÿè£…ä¾‹:
```csharp
// âŒ é–“é•ã„: å…¨ãƒ¢ãƒ¼ãƒ‰ã«å½±éŸ¿
int maxCount = simulation.GetParticleCount();

// âœ… æ­£ã—ã„: WaveModeã®ã¿å¤‰æ›´ã€NormalModeã¯å…ƒã®ã¾ã¾
int maxCount = (simulation.mode == SimulationMode.WaveMode)
    ? simulation.GetParticleCount()  // WaveModeã®æ™‚ã ã‘å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
    : 14000;                          // NormalModeã¯å…ƒã®14000
```

#### ç¦æ­¢ã•ã‚Œã‚‹è¡Œç‚º:
- âŒ æ¡ä»¶ã‚’ç„¡è¦–ã—ã¦å…¨ä½“ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨
- âŒ ã€Œå¤šåˆ†ã“ã£ã¡ã®æ–¹ãŒè‰¯ã„ã€ã¨å‹æ‰‹ã«åˆ¤æ–­ã—ã¦ä»–ã®ãƒ¢ãƒ¼ãƒ‰ã‚‚å¤‰æ›´ã™ã‚‹ã“ã¨
- âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºç¯„å›²ã‚’å‹æ‰‹ã«æ‹¡å¤§è§£é‡ˆã™ã‚‹ã“ã¨

#### é•åã®çµæœ:
**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŒ‡ç¤ºã‚’ç„¡è¦–ã—ãŸå¤‰æ›´ã¯ã€ä¿¡é ¼ã‚’å®Œå…¨ã«å¤±ã†ã€‚æ¡ä»¶ä»˜ãæŒ‡ç¤ºã¯å³å¯†ã«éµå®ˆã™ã‚‹ã“ã¨ã€‚**

---

### 9. ã€Œå…ƒã«æˆ»ã›ã€æŒ‡ç¤ºã¸ã®å¯¾å¿œåŸå‰‡

**[ABSOLUTE REQUIREMENT]** ã€Œå…ƒã«æˆ»ã›ã€ã¨ã„ã†æŒ‡ç¤ºã‚’å—ã‘ãŸå ´åˆã€å¿…ãšä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ä½œæ¥­ã™ã‚‹ã“ã¨

#### å¿…é ˆç¢ºèªäº‹é …:
1. **[MANDATORY]** ä½•ã‚’å…ƒã«æˆ»ã™ã®ã‹æ˜ç¢ºã«ç¢ºèªã™ã‚‹
2. **[MANDATORY]** ã©ã®æ™‚ç‚¹ã®çŠ¶æ…‹ã«æˆ»ã™ã®ã‹ç¢ºèªã™ã‚‹
3. **[MANDATORY]** å…ƒã«æˆ»ã™ç¯„å›²ã‚’ç¢ºèªã™ã‚‹ï¼ˆå…¨ä½“ or ä¸€éƒ¨ï¼‰
4. **[MANDATORY]** ç¢ºèªå¾Œã€ä½œæ¥­å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å ±å‘Šã—ã¦ã‹ã‚‰ä½œæ¥­é–‹å§‹
5. **[ABSOLUTE PROHIBITION]** å‹æ‰‹ã«åˆ¤æ–­ã—ã¦ä½œæ¥­é–‹å§‹ã™ã‚‹ã“ã¨ã¯çµ¶å¯¾ç¦æ­¢

#### æ­£ã—ã„å¯¾å¿œä¾‹:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€ŒNormalModeã®æ™‚ã®æŒ™å‹•ã ã‘å…ƒã«æˆ»ã›ã€

âœ… æ­£ã—ã„å¯¾å¿œ:
1. ã€ŒNormalModeã®æŒ™å‹•ã‚’å…ƒã«æˆ»ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ï¼š
   - displayCount: å…ƒã®[Range(100, 14000)]ã«æˆ»ã™
   - InitializeParticleSystem(): maxParticles=14000ã«æˆ»ã™
   - LateUpdate(): displayCountã§åˆ¶é™ã«æˆ»ã™
   WaveModeã¯å¤‰æ›´ã—ã¾ã›ã‚“ã€‚ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿã€
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¢ºèªã‚’å¾…ã¤
3. ç¢ºèªå¾Œã«ä½œæ¥­é–‹å§‹

âŒ é–“é•ã£ãŸå¯¾å¿œ:
1. å‹æ‰‹ã«åˆ¤æ–­ã—ã¦ä½œæ¥­é–‹å§‹
2. ä½•ã‚’æˆ»ã™ã®ã‹ç¢ºèªã›ãšã«ä½œæ¥­
3. å…¨ä½“ã‚’æˆ»ã—ã¦ã—ã¾ã†
```

---

## ğŸ“… 2026-01-13ï¼ˆç¶šãï¼‰

### Phase 9: WaveModeå®Œå…¨å®Ÿè£…ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
FirePrinterãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã”ã¨ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å£ã‚’ç”Ÿæˆãƒ»å³ã«æµã™WaveModeã‚’å®Ÿè£…

#### å®Ÿè£…å†…å®¹

**1. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ **:
- `waveInterval`: å£ã®ç”Ÿæˆé–“éš”ï¼ˆç§’ï¼‰ã€Inspectorå¤‰æ›´ã‚’å³åº§ã«åæ˜ 
- `waveSpeed`: å£ã®ç§»å‹•é€Ÿåº¦
- `maxWaves`: ãƒ—ãƒ¼ãƒ«å†…ã®å£ã®æœ€å¤§æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ10æœ¬ï¼‰
- `particlesPerWave`: å£1æœ¬ã‚ãŸã‚Šã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ3000å€‹ã€1000-10000ã§èª¿æ•´å¯èƒ½ï¼‰

**2. FirePrinterãƒ‘ã‚¿ãƒ¼ãƒ³é©ç”¨**:
- `InvokeRepeating(nameof(SpawnWave), 0f, waveInterval)` ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã”ã¨ã«å£ã‚’ç”Ÿæˆ
- `OnValidate()` ã§Inspectorå¤‰æ›´ã‚’å³åº§ã«åæ˜ ï¼ˆFirePrinterã¨åŒã˜å®Ÿè£…ï¼‰
- `OnEnable()` / `OnDisable()` ã§Invokeç®¡ç†

**3. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«æ–¹å¼**:
- åˆæœŸåŒ–æ™‚ã« `particlesPerWave Ã— maxWaves` å€‹ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ä½œæˆ
- å„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã« `waveId`ï¼ˆ0ï½maxWaves-1ï¼‰ã‚’å‰²ã‚Šå½“ã¦
- SpawnWave()ã§ä½¿ç”¨å¯èƒ½ãªwaveIdï¼ˆå…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒéè¡¨ç¤ºä½ç½®ï¼‰ã‚’æ¢ã—ã¦å†åˆ©ç”¨
- currentWaveIdã‚’ãƒ«ãƒ¼ãƒ—ï¼ˆ0â†’1â†’...â†’maxWaves-1â†’0ï¼‰

**4. å£ã®ç”Ÿæˆãƒ»ç§»å‹•å‡¦ç†**:
- **SpawnWave()**: ä½¿ç”¨å¯èƒ½ãªwaveIdã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’å·¦ç«¯ï¼ˆx: -0.02ï½0.03ï¼‰ã«é…ç½®
- **UpdateParticlesWave()**: å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’å³ã«ç§»å‹•ï¼ˆé€Ÿåº¦: waveSpeedï¼‰ã€å³ç«¯è¶…éã§éè¡¨ç¤ºä½ç½®ï¼ˆx: -10ï¼‰ã«æˆ»ã™

#### é‡è¦ãªè¨­è¨ˆåˆ¤æ–­

**particleCountã‚’ä½¿ã‚ãªã„**:
- NormalModeã§ã¯`particleCount`ï¼ˆ14000å€‹ï¼‰ã‚’ä½¿ç”¨
- WaveModeã§ã¯`particlesPerWave`ï¼ˆ3000å€‹ï¼‰ã‚’ä½¿ç”¨
- å£ã®è¦‹ãŸç›®ã«å¿…è¦ãªå¯†åº¦ã®ã¿ç¢ºä¿ã€éåº¦ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ã¯ä¸è¦

**å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒéè¡¨ç¤ºä½ç½®ã«ã‚ã‚‹ã‹ç¢ºèª**:
- éƒ¨åˆ†çš„ã«éè¡¨ç¤ºä½ç½®ã«æˆ»ã£ãŸwaveIdã‚’å†åˆ©ç”¨ã™ã‚‹ã¨ã€å°ã•ã„å£ãŒç”Ÿæˆã•ã‚Œã‚‹å•é¡Œ
- å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒéè¡¨ç¤ºä½ç½®ã«æˆ»ã‚‹ã¾ã§ã€ãã®waveIdã¯ä½¿ç”¨ä¸å¯ã«ã™ã‚‹

#### ãƒ‡ãƒãƒƒã‚°çµŒç·¯
1. åˆå›å®Ÿè£…: å‰Šé™¤å‡¦ç†ï¼ˆRemoveAtï¼‰ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ‚ªåŒ–
2. ä¿®æ­£1: éè¡¨ç¤ºä½ç½®ã¸ã®ç§»å‹•ã«å¤‰æ›´
3. ä¿®æ­£2: waveIdåˆ¤å®šãŒä¸å®Œå…¨ï¼ˆ1å€‹ã§ã‚‚éè¡¨ç¤ºä½ç½®ã«ã‚ã‚Œã°OKï¼‰â†’ å°ã•ã„å£ãŒç”Ÿæˆ
4. æœ€çµ‚ä¿®æ­£: å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒéè¡¨ç¤ºä½ç½®ã«ã‚ã‚‹ã‹ç¢ºèª â†’ æ­£å¸¸å‹•ä½œ

#### å‹•ä½œç¢ºèªçµæœ
- âœ… waveIntervalé€šã‚Šã«å£ãŒç”Ÿæˆã•ã‚Œã‚‹
- âœ… å„waveIdãŒåˆ¥ã€…ã®ä½ç½®ã§ç§»å‹•ï¼ˆé‡ãªã‚‰ãªã„ï¼‰
- âœ… Inspectorå¤‰æ›´ï¼ˆwaveIntervalã€waveSpeedï¼‰ãŒå³åº§ã«åæ˜ ã•ã‚Œã‚‹
- âœ… ãƒ—ãƒ¼ãƒ«æ¯æ¸‡æ™‚ã¯ç”Ÿæˆã‚¹ã‚­ãƒƒãƒ—ï¼ˆmaxWavesæœ¬ä½¿ç”¨ä¸­ã®å ´åˆï¼‰

---

## ğŸ“… 2026-01-13ï¼ˆç¶šãï¼‰

### Phase 8: WaveModeå®Ÿè£…ï¼ˆå®Œäº† âœ…ï¼‰

#### ç›®çš„
NormalModeã®å·¦ç«¯ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å£ã‚’æ–­ç¶šçš„ã«ä¸€å®šé–“éš”ã§æµã™æ–°ãƒ¢ãƒ¼ãƒ‰

#### å®Ÿè£…å†…å®¹

**1. ãƒ‡ãƒ¼ã‚¿æ§‹é€ æ‹¡å¼µï¼ˆRiverParticleData.csï¼‰**:
- `waveId`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼ˆæ‰€å±ã™ã‚‹å£IDï¼‰
- WaveModeç”¨ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿è¿½åŠ 

**2. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ ï¼ˆRiverFlowSimulation.csï¼‰**:
- `waveInterval`: å£ã®ç™ºç”Ÿé–“éš”ï¼ˆç§’ï¼‰
- `waveSpeed`: å£ã®ç§»å‹•é€Ÿåº¦

**3. å†…éƒ¨å¤‰æ•°è¿½åŠ **:
- `maxWaves`: æœ€å¤§åŒæ™‚å£æ•°ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
- `particlesPerWave`: å„å£ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
- `waveTimer`: å£ç™ºç”Ÿã‚¿ã‚¤ãƒãƒ¼
- `currentWaveId`: æ¬¡ã«ç™ºç”Ÿã•ã›ã‚‹å£ID

**4. åˆæœŸåŒ–å‡¦ç†ï¼ˆInitializeWaveï¼‰**:
- æœ€å¤§åŒæ™‚å£æ•° = ceil((ç”»é¢æ¨ªæ–­æ™‚é–“) / waveInterval) + 1
- å„å£ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•° = particleCount / maxWaves
- å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’éè¡¨ç¤ºä½ç½®ï¼ˆx: -10ï¼‰ã«é…ç½®
- å„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã«å£IDã‚’å‰²ã‚Šå½“ã¦

**5. æ›´æ–°å‡¦ç†ï¼ˆUpdateParticlesWaveï¼‰**:
- waveIntervalç§’ã”ã¨ã«å£ã‚’ç™ºç”Ÿï¼ˆSpawnWaveå‘¼ã³å‡ºã—ï¼‰
- å…¨ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’Xæ–¹å‘ã«ç§»å‹•ï¼ˆé€Ÿåº¦: waveSpeedï¼‰
- å³ç«¯é€šéï¼ˆx > 1.2ï¼‰ã§éè¡¨ç¤ºä½ç½®ã«æˆ»ã™

**6. å£ç™ºç”Ÿå‡¦ç†ï¼ˆSpawnWaveï¼‰**:
- æŒ‡å®šå£IDã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’å·¦ç«¯ç”»é¢å¤–ï¼ˆx: -0.1 ~ -0.05ï¼‰ã«é…ç½®
- Yåº§æ¨™ã¯ãƒ©ãƒ³ãƒ€ãƒ ï¼ˆ0ï½1ï¼‰

#### ç‰¹å¾´
- **è¤‡æ•°ã®å£ãŒåŒæ™‚ã«å­˜åœ¨å¯èƒ½**: é–“éš”ã¨é€Ÿåº¦ã®è¨­å®šã«ã‚ˆã‚Šç”»é¢å†…ã«è¤‡æ•°ã®å£
- **è»½é‡ãªå‡¦ç†**: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«åˆ†å‰²æ–¹å¼ã§åŠ¹ç‡çš„
- **Inspectorä¸Šã§èª¿æ•´å¯èƒ½**: waveIntervalã€waveSpeedã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ èª¿æ•´å¯èƒ½

#### å‹•ä½œç¢ºèªé …ç›®
- [ ] WaveModeã«åˆ‡ã‚Šæ›¿ãˆã¦å£ãŒæ–­ç¶šçš„ã«æµã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] waveIntervalã‚’å¤‰æ›´ã—ã¦é–“éš”ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] waveSpeedã‚’å¤‰æ›´ã—ã¦é€Ÿåº¦ãŒå¤‰ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] particleCountã‚’å¢—ã‚„ã—ã¦å„å£ã®å¯†åº¦ã‚’èª¿æ•´

---

---

## ğŸ“… 2026-01-13

### Phase 7: Litãƒãƒ†ãƒªã‚¢ãƒ«å¯¾å¿œï¼ˆã‚¨ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ¶å¾¡ï¼‰

#### å•é¡Œï¼šUnlitãƒãƒ†ãƒªã‚¢ãƒ«ã§ã¯ã‚¨ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®šä¸å¯
- ç¾åœ¨ã®ãƒãƒ†ãƒªã‚¢ãƒ«: `Universal Render Pipeline/Particles/Unlit`
- Unlitã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã«ã¯ã‚¨ãƒŸãƒƒã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãŒãªã„
- ç²’å­ã‚’å…‰ã‚‰ã›ã‚‹ã“ã¨ãŒã§ããªã„

#### è§£æ±ºç­–ï¼šLitãƒãƒ†ãƒªã‚¢ãƒ«ç§»è¡Œ
- æ–°è¦ãƒãƒ†ãƒªã‚¢ãƒ«: `Assets/Materials/LitParticle.mat`
- ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼: `Universal Render Pipeline/Lit`
- `_EmissionColor`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å¯¾å¿œ

#### å®Ÿè£…å¤‰æ›´
**RiverFlowVisualizer.cs (78-92è¡Œç›®)**:
- `_BaseColor`æ›´æ–°ï¼ˆæ—¢å­˜ï¼‰
- `_EmissionColor`æ›´æ–°ï¼ˆæ–°è¦ï¼‰
- `_EMISSION`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–ï¼ˆæ–°è¦ï¼‰

**åŠ¹æœ**:
- Inspectorä¸Šã®`particleColor`å¤‰æ›´ã§ã‚¨ãƒŸãƒƒã‚·ãƒ§ãƒ³è‰²ã‚‚è‡ªå‹•åŒæœŸ
- ç²’å­ã‚’å…‰ã‚‰ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã«

#### è¨­å®šæ‰‹é †
1. `RiverFlowVisualizer`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Inspectorã‚’é–‹ã
2. `Particle Material`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«`Assets/Materials/LitParticle.mat`ã‚’è¨­å®š
3. `Particle Color`ã§ã‚¨ãƒŸãƒƒã‚·ãƒ§ãƒ³è‰²ã‚’èª¿æ•´

---

## ğŸ“… 2026-01-09

### Phase 6: ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒ»æ©Ÿèƒ½è¿½åŠ 

#### å•é¡Œï¼š[Range]å±æ€§ã«ã‚ˆã‚‹ä»•æ§˜å¤‰æ›´ã¸ã®è„†å¼±æ€§
- `RiverFlowSimulation.particleSize`ãŒ`[Range(0.01f, 0.5f)]`ã§åˆ¶é™
- è¡¨ç¤ºç¯„å›²ãŒFullHDå…¨ä½“ã«æ‹¡å¤§ã•ã‚ŒãŸãŸã‚ã€ç›¸å¯¾çš„ã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒå°ã•ã™ãã‚‹
- æœ€å¤§å€¤0.5ã§ã¯ä¸ååˆ†

#### è§£æ±ºç­–ï¼š[Range]å±æ€§å‰Šé™¤
- `particleSize`ã‹ã‚‰`[Range]`å±æ€§ã‚’å‰Šé™¤
- Inspectorä¸Šã§ä»»æ„ã®ã‚µã‚¤ã‚ºã‚’è¨­å®šå¯èƒ½ã«
- **æ•™è¨“**: æœ€å¤§å€¤ã‚’å®šã‚ãªã„è¨­è¨ˆãŒä»•æ§˜å¤‰æ›´ã«å¼·ã„

#### é‡è¤‡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•´ç†
**å•é¡Œ**: `particleSize`ãŒ2ç®‡æ‰€ã«å­˜åœ¨
- `RiverFlowSimulation.cs` (28è¡Œç›®) - Gizmosãƒ‡ãƒãƒƒã‚°è¡¨ç¤ºç”¨
- `RiverFlowVisualizer.cs` (20è¡Œç›®) - ParticleSystemæç”»ç”¨

**è§£æ±ºç­–**:
- `RiverFlowVisualizer.cs`ã®`particleSize`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å‰Šé™¤
- `simulation.particleSize`ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´
- Simulationå´ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ä¸€å…ƒåŒ–

#### é€Ÿåº¦å¤‰æ›´ç”¨publicé–¢æ•°è¿½åŠ 
- `RiverFlowSimulation.SetSpeedMultiplier(float speed)`ã‚’è¿½åŠ 
- UnityEventã‹ã‚‰å‘¼ã³å‡ºã—å¯èƒ½
- å¤–éƒ¨ã‹ã‚‰å‹•çš„ã«é€Ÿåº¦å¤‰æ›´ãŒå¯èƒ½ã«

**ã‚³ãƒ¼ãƒ‰**:
```csharp
/// <summary>
/// é€Ÿåº¦å€ç‡ã‚’è¨­å®š
/// </summary>
public void SetSpeedMultiplier(float speed)
{
    speedMultiplier = speed;
}
```

---

### Yoloãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªèª¿æŸ»

#### Assets/Script/Yolo/srcå†…å®¹
æ—¢å­˜ã®Pythonãƒ™ãƒ¼ã‚¹YOLOç‰©ä½“æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ã‚’ç™ºè¦‹ï¼š

**ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ**:
1. `additional_dataset.yaml` - COCO 81ã‚¯ãƒ©ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆè¨­å®š
2. `predict.py` - ç‰©ä½“æ¤œå‡ºï¼ˆãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ï¼‰
3. `predict_segment.py` - ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆè¼ªéƒ­æŠ½å‡ºã€RGBAé€æ˜èƒŒæ™¯å‡ºåŠ›ï¼‰
4. `train.py` - ç‰©ä½“æ¤œå‡ºãƒ¢ãƒ‡ãƒ«å­¦ç¿’
5. `train_segment.py` - ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ‡ãƒ«å­¦ç¿’

**ç¾çŠ¶ã®æ©Ÿèƒ½**:
- å…¥åŠ›: é™æ­¢ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
- æ¤œå‡º: COCO 81ã‚¯ãƒ©ã‚¹ï¼ˆperson, cup, bowlç­‰ï¼‰
- å‡ºåŠ›: ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ or RGBAè¼ªéƒ­ç”»åƒ
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: ultralyticsï¼ˆYOLOv11ï¼‰

**å•é¡Œç‚¹**:
- é™æ­¢ç”»ã®ã¿ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ˜ åƒéå¯¾å¿œ
- ã‚«ã‚¹ã‚¿ãƒ ç‰©ä½“ï¼ˆæ³¡ç­‰ï¼‰ã¯æœªå¯¾å¿œ
- Pythonã®ã¿ã€Unityçµ±åˆãªã—

---

### æ–°æ©Ÿèƒ½è¦æ±‚ï¼šå·ã®æ³¡æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ 

#### ç›®çš„
å¤–éƒ¨ã‚«ãƒ¡ãƒ©ã‹ã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ˜ åƒã‚’å–å¾—ã—ã€å·ã®æ³¡ã‚’æ¤œå‡ºãƒ»é€Ÿåº¦æ¸¬å®šã—ã€`RiverFlowSimulation.speedMultiplier`ã‚’è‡ªå‹•èª¿æ•´

#### è¦ä»¶
1. **å®Œå…¨C#å®Ÿè£…** - Pythonä½¿ç”¨ä¸å¯
2. **å¤–éƒ¨ã‚«ãƒ¡ãƒ©å…¥åŠ›** - USBã‚«ãƒ¡ãƒ©ç­‰
3. **æ³¡æ¤œå‡º** - ã‚«ã‚¹ã‚¿ãƒ å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨
4. **é€Ÿåº¦æ¸¬å®š** - æ¤œå‡ºã—ãŸæ³¡ã®ç§»å‹•é€Ÿåº¦ã‚’è¨ˆç®—
5. **è‡ªå‹•èª¿æ•´** - `SetSpeedMultiplier()`ã§é€Ÿåº¦åŒæœŸ
6. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§** - 24FPSä»¥ä¸Š

#### æŠ€è¡“çš„èª²é¡Œ
- ç¾åœ¨ã®Yoloã‚³ãƒ¼ãƒ‰ã¯`ultralytics`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ï¼ˆç´„5ä¸‡è¡Œã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆå®Ÿè£…ï¼‰
- YOLOv11ã®å®Œå…¨C#å®Ÿè£…ã¯æ•°é€±é–“ï½æ•°ãƒ¶æœˆè¦æ¨¡
- Unity ML-Agentsç­‰ã®æ—¢å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ã‚‚ä¸å¯ã¨ã®æ–¹é‡

#### æœªè§£æ±ºäº‹é …
- [ ] YOLOv11ã‚’C#ã§ã‚¼ãƒ­ã‹ã‚‰å®Ÿè£…ã™ã‚‹ã‹
- [ ] ä»£æ›¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆOpenCVãƒ™ãƒ¼ã‚¹ç­‰ï¼‰ã‚’æ¤œè¨ã™ã‚‹ã‹
- [ ] å­¦ç¿’æ©Ÿèƒ½ã‚‚C#ã§å®Ÿè£…ã™ã‚‹ã‹
- [ ] æ³¡ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ•°ãƒ»ãƒ©ãƒ™ãƒ«ä»˜ã‘æ–¹æ³•
- [ ] å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆUnity Sentis, OpenCVForUnityï¼‰ã®ä½¿ç”¨å¯å¦

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¦ä»¶å®šç¾©ä¸­ã€å®Ÿè£…æ–¹é‡æœªæ±ºå®š

---

### âš ï¸ æ•™è¨“è¿½åŠ 

#### 6. [Range]å±æ€§ã¯ä»•æ§˜å¤‰æ›´ã«å¼±ã„ï¼ˆ2026-01-09è¿½åŠ ï¼‰
- **[CRITICAL]** æœ€å¤§å€¤ã‚’å®šã‚ãªã„è¨­è¨ˆã‚’å„ªå…ˆã™ã‚‹ã“ã¨
- `[Range]`ã¯æœ¬å½“ã«å¿…è¦ãªå ´åˆã®ã¿ä½¿ç”¨
- å°†æ¥ã®ä»•æ§˜å¤‰æ›´ï¼ˆç”»é¢ã‚µã‚¤ã‚ºã€è¡¨ç¤ºç¯„å›²ç­‰ï¼‰ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

#### 7. é‡è¤‡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ’é™¤
- **[MANDATORY]** åŒã˜ç›®çš„ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯1ç®‡æ‰€ã«é›†ç´„
- è¤‡æ•°ç®‡æ‰€ã§ç®¡ç†ã™ã‚‹ã¨åŒæœŸæ¼ã‚Œãƒ»ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ä½ä¸‹
- å‚ç…§ã«ã‚ˆã‚‹å…±æœ‰ã‚’å„ªå…ˆ

---

---

## ğŸ“… 2026-01-02

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç§»è¡Œï¼ˆæ—§â†’æ–°ï¼‰

#### æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå•é¡Œ
- `D:\Tozawa_Unity\RiverProjectionMaping`ã§`Assets/nul`ã®AssetDatabaseã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
- Libraryãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤å¾Œã«ã‚¨ãƒ©ãƒ¼999å€‹ä»¥ä¸Šç™ºç”Ÿ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¾©æ—§ä¸å¯èƒ½ã¨åˆ¤æ–­

#### æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: `RiverProjectionMap_New`ï¼ˆå¾Œã«`RiverProjectionMap_ver26110`ã¨ã—ã¦ã‚³ãƒ”ãƒ¼ï¼‰
- å ´æ‰€: `D:\Tozawa_Unity\RiverProjectionMap_New` â†’ `D:\seimiya\Unity\RiverProjectionMap_ver26110`
- **é‡è¦**: Unity 6ã¯URPãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆBuilt-inã§ã¯ãªã„ï¼‰

---

## å®Ÿè£…é€²æ—

### Phase 1: åŸºç¤æ§‹é€ ï¼ˆå®Œäº† âœ…ï¼‰
- [x] ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼ˆ6å€‹ï¼‰
  - RiverParticleData.cs
  - VectorField.cs
  - VectorFieldTest.cs
  - RiverFlowSimulation.cs
  - TrailRenderer.cs
  - RiverFlowController.cs

**æˆæœ**: 14,000å€‹ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèªï¼ˆGizmoså¯è¦–åŒ–ï¼‰

---

### Phase 2: URPå¯¾å¿œã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ä½œæˆï¼ˆå®Œäº† âœ…ï¼‰

#### å•é¡Œç™ºè¦š
- æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¯å…¨ã¦Built-inç”¨ï¼ˆCGPROGRAMæ§‹æ–‡ï¼‰
- URPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯å‹•ä½œã—ãªã„
- QuadãŒèµ¤ãè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚¨ãƒ©ãƒ¼ï¼‰

#### è§£æ±ºç­–ï¼šURP HLSLæ§‹æ–‡ã«æ›¸ãæ›ãˆ
- [x] DecayShader.shader - URPå¯¾å¿œå®Œäº†
- [x] BlurShader.shader - URPå¯¾å¿œå®Œäº†
- [x] NormalizeGammaShader.shader - URPå¯¾å¿œå®Œäº†
- [x] DisplayTexture.shader - æ–°è¦ä½œæˆï¼ˆRenderTextureè¡¨ç¤ºç”¨ï¼‰

**ä¸»ãªå¤‰æ›´ç‚¹**:
- `CGPROGRAM` â†’ `HLSLPROGRAM`
- `#include "UnityCG.cginc"` â†’ `#include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"`
- `tex2D()` â†’ `SAMPLE_TEXTURE2D()`
- `Tags`ã«`"RenderPipeline"="UniversalPipeline"`è¿½åŠ 

---

### Phase 3: RenderTextureè¡¨ç¤ºï¼ˆéƒ¨åˆ†çš„å®Œäº† âš ï¸ï¼‰

#### å•é¡Œï¼šRenderTextureãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- åˆæœŸå®Ÿè£…: `RenderTextureFormat.RFloat`ï¼ˆå˜ä¸€ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰
- çµæœ: QuadãŒèµ¤ãè¡¨ç¤ºã•ã‚Œã‚‹

#### è§£æ±ºç­–ï¼šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´
- `RFloat` â†’ `ARGBHalf`ï¼ˆRGBAãƒãƒ£ãƒ³ãƒãƒ«å…¨ã¦ä½¿ç”¨ï¼‰
- çµæœ: **ç™½ã„ç”»é¢è¡¨ç¤ºæˆåŠŸ**

#### å•é¡Œï¼šGLæç”»ãŒRenderTextureã«åæ˜ ã•ã‚Œãªã„
- `GL.Begin(GL.QUADS)`ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æç”»ã‚’è©¦ã¿ã‚‹ã‚‚ã€RenderTextureã«ä½•ã‚‚æç”»ã•ã‚Œãªã„
- è¤‡æ•°å›ã®ãƒ‡ãƒãƒƒã‚°ãƒ»ä¿®æ­£ã‚’è©¦ã¿ã‚‹ã‚‚è§£æ±ºã›ãš

---

### Phase 4: ParticleSystemç›´æ¥æç”»æ–¹å¼ï¼ˆå®Œäº† âœ…ï¼‰

#### æ–¹é‡è»¢æ›ï¼ˆé‡è¦ãªæ•™è¨“ï¼‰
**æ•™è¨“**: ä½•åº¦ã‚‚å¤±æ•—ã—ãŸã‚‰æ–¹æ³•ã‚’å¤‰ãˆã‚‹

- RenderTexture + GLæç”»ã‚’è«¦ã‚
- **RiverFlowSimulationï¼ˆæ—¢ã«å‹•ä½œï¼‰** ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ç›´æ¥ParticleSystemã§æç”»

#### RiverFlowVisualizer.csä½œæˆ
- [x] ParticleSystemã§Gameãƒ“ãƒ¥ãƒ¼ã«ç›´æ¥æç”»
- [x] URPå¯¾å¿œãƒãƒ†ãƒªã‚¢ãƒ«è‡ªå‹•ä½œæˆ
- [x] ç™½ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¡¨ç¤ºæˆåŠŸ

**ã‚³ãƒ¼ãƒ‰**:
```csharp
Material mat = new Material(Shader.Find("Universal Render Pipeline/Particles/Unlit"));
mat.SetColor("_BaseColor", Color.white);
renderer.material = mat;
```

**æˆæœ**: **14,000å€‹ã®ç™½ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒå³â†’å·¦ã«æµã‚Œã‚‹è¡¨ç¤ºå®Œæˆ**

---

### Phase 5: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«å½¢çŠ¶ãƒ»è¡¨ç¤ºèª¿æ•´ï¼ˆå®Œäº† âœ…ï¼‰ - 2026-01-07

#### å•é¡Œï¼šãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒå››è§’ãè¡¨ç¤ºã•ã‚Œã‚‹
- ParticleSystemã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ†ãƒªã‚¢ãƒ«ã‚’ä¸Šæ›¸ãã—ãŸãŸã‚ã€DefaultParticleãƒ†ã‚¯ã‚¹ãƒãƒ£ãŒå¤±ã‚ã‚ŒãŸ
- çµæœï¼šå››è§’ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¡¨ç¤º

#### è©¦è¡ŒéŒ¯èª¤ï¼ˆå¤šæ•°ã®å¤±æ•—ï¼‰
1. `Resources.GetBuiltinResource`ã§ãƒ†ã‚¯ã‚¹ãƒãƒ£å–å¾— â†’ å¤±æ•—
2. `Resources.Load("unity_builtin_extra/Default-Particle")` â†’ å¤±æ•—
3. ä¸€æ™‚çš„ãªParticleSystemä½œæˆã§ãƒ†ã‚¯ã‚¹ãƒãƒ£å–å¾— â†’ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ†ãƒªã‚¢ãƒ«ãŒnull
4. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã§ä¸¸ã„ãƒ†ã‚¯ã‚¹ãƒãƒ£ä½œæˆ â†’ å“è³ªä¸ååˆ†

#### è§£æ±ºç­–ï¼šã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ãƒãƒ†ãƒªã‚¢ãƒ«è¨­å®š
- `Assets/Materials/DefaultParticle.mat`ã‚’æ‰‹å‹•ä½œæˆ
- `RiverFlowVisualizer`ã«publicãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼š`public Material particleMaterial;`
- Inspectorä¸Šã§ãƒãƒ†ãƒªã‚¢ãƒ«è¨­å®š

**æ•™è¨“**: æœ€åˆã‹ã‚‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½¿ã†ã¹ãã€‚Resources.Loadã‚„å‹•çš„ç”Ÿæˆã¯è¤‡é›‘ã§ã‚¨ãƒ©ãƒ¼ãŒå¤šã„ã€‚

#### è¡¨ç¤ºç¯„å›²èª¿æ•´æ©Ÿèƒ½è¿½åŠ 
- [x] `displayScaleX`ã€`displayScaleY`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
- [x] FullHDç”»é¢å…¨ä½“ã«è¡¨ç¤ºå¯èƒ½ã«ï¼ˆæ¨å¥¨å€¤ï¼š20.5 x 11.5ï¼‰

#### é€Ÿåº¦èª¿æ•´æ©Ÿèƒ½è¿½åŠ 
- [x] `RiverFlowSimulation`ã«`speedMultiplier`è¿½åŠ ï¼ˆ0.1ï½5.0å€é€Ÿï¼‰
- [x] Inspectorä¸Šã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ èª¿æ•´å¯èƒ½

**æˆæœ**: **ä¸¸ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒFullHDç”»é¢å…¨ä½“ã«è¡¨ç¤ºã€é€Ÿåº¦èª¿æ•´å¯èƒ½**

---

## æŠ€è¡“ä»•æ§˜

### ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«è¨­å®š
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«æ•°: 14,000å€‹ï¼ˆå¯å¤‰ï¼šInspectorä¸Šã§å¤‰æ›´å¯èƒ½ï¼‰
- æç”»æ–¹å¼: ParticleSystemï¼ˆBillboardï¼‰
- å½¢çŠ¶: ä¸¸ï¼ˆDefaultParticleãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼‰
- è‰²: ç™½ï¼ˆInspectorä¸Šã§å¤‰æ›´å¯èƒ½ï¼‰
- ã‚µã‚¤ã‚º: 0.05ï¼ˆInspectorä¸Šã§å¤‰æ›´å¯èƒ½ï¼‰
- é€Ÿåº¦å€ç‡: 1.0ï¼ˆ0.1ï½5.0ã€Inspectorä¸Šã§å¤‰æ›´å¯èƒ½ï¼‰

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ™ã‚¯ãƒˆãƒ«å ´: è›‡è¡Œã™ã‚‹ä¸­å¿ƒæµ + å¾®å°æ¸¦
- ç”»é¢ç«¯å‡¦ç†: å³ç«¯â†’å·¦ç«¯ãƒ«ãƒ¼ãƒ—ã€ä¸Šä¸‹åå°„
- æ›´æ–°: RiverFlowSimulation.Update()

### ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³: URP
- ãƒãƒ†ãƒªã‚¢ãƒ«: `Assets/Materials/DefaultParticle.mat`ï¼ˆInspectorä¸Šã§è¨­å®šï¼‰
- è¡¨ç¤º: Gameãƒ“ãƒ¥ãƒ¼ç›´æ¥æç”»
- è¡¨ç¤ºç¯„å›²: displayScaleX, displayScaleY ã§èª¿æ•´å¯èƒ½

---

## âš ï¸ é‡è¦ãªæ•™è¨“ãƒ»å­¦ã³

### 1. Unity 6ã¯URPãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
- **[CRITICAL]** æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã¯URPã‚’å‰æã¨ã™ã‚‹
- Built-inç”¨ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã¯å‹•ä½œã—ãªã„
- æœ€åˆã‹ã‚‰URPå¯¾å¿œã§å®Ÿè£…ã™ã¹ã

### 2. å¤±æ•—æ™‚ã®æ–¹é‡è»¢æ›
- **[MANDATORY]** 2-3å›å¤±æ•—ã—ãŸã‚‰å³åº§ã«åˆ¥ã®æ–¹æ³•ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
- åŒã˜æ–¹æ³•ã‚’ç¹°ã‚Šè¿”ã™ã®ã¯æ™‚é–“ã®ç„¡é§„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ææ¡ˆã‚’æœ€å„ªå…ˆã™ã‚‹

### 3. æ—¢å­˜ã®å‹•ä½œã—ã¦ã„ã‚‹ã‚‚ã®ã‚’æ´»ç”¨
- RiverFlowSimulationã¯æ—¢ã«Gizmoså¯è¦–åŒ–ã§å‹•ä½œã—ã¦ã„ãŸ
- ãã‚Œã‚’ç›´æ¥ParticleSystemã§æç”»ã™ã‚‹æ–¹ãŒé¥ã‹ã«åŠ¹ç‡çš„
- è¤‡é›‘ãªæ–¹æ³•ï¼ˆRenderTexture + GLæç”»ï¼‰ã‚ˆã‚Šã€ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã‚’å„ªå…ˆ

### 4. RenderTextureãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®é‡è¦æ€§
- URPã§ã¯`RFloat`ï¼ˆå˜ä¸€ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰ã¯æ­£ã—ãè¡¨ç¤ºã•ã‚Œãªã„
- `ARGBHalf`ç­‰ã®RGBAãƒãƒ£ãƒ³ãƒãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨

### 5. ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æœ€å„ªå…ˆã«ä½¿ç”¨ï¼ˆ2026-01-07è¿½åŠ ï¼‰
- **[CRITICAL]** ã‚¢ã‚»ãƒƒãƒˆå‚ç…§ã¯æœ€åˆã‹ã‚‰ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆpublic/[SerializeField]ï¼‰ã§è¨­å®š
- Resources.Loadã‚„GetBuiltinResourceã¯è¤‡é›‘ã§ã‚¨ãƒ©ãƒ¼ãŒå¤šã„
- å‹•çš„ç”Ÿæˆã‚ˆã‚Šæ‰‹å‹•ä½œæˆãƒ»è¨­å®šã®æ–¹ãŒç¢ºå®Ÿã§é«˜é€Ÿ

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—å€™è£œ

### æ¡ˆ1: Trailè“„ç©åŠ¹æœ
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®è»Œè·¡ã‚’æ®‹ã™
- RenderTextureãƒ™ãƒ¼ã‚¹ã®trailè“„ç©ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

### æ¡ˆ2: é€Ÿåº¦ãƒ™ãƒ¼ã‚¹ã®è‰²å¤‰åŒ–
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®é€Ÿåº¦ã«å¿œã˜ã¦è‰²ã‚’å¤‰ãˆã‚‹
- ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º

### æ¡ˆ3: ãã®ä»–ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
- Bloomã€Glowç­‰ã®ãƒã‚¹ãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ

---


---

**æœ€çµ‚æ›´æ–°**: 2026-01-27
